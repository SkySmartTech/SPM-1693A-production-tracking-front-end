import{j as e,T as m,P as L,r,e as _,B as g,f as ee,i as se,k as ae,D as z,C as ne}from"./index-bN0kxz6j.js";import{T as te,a as le,b as re,c as S,d as ie}from"./TableRow-CwSJmxv2.js";import{T as t}from"./TableCell-DCUFSBmw.js";import{I as x,A as oe,M as ce,B as de,N as he,F as ue}from"./Notifications-bIT2NjpP.js";import{E as me}from"./Edit-lrmSDBB-.js";import{D as xe}from"./Delete-CtTY_amx.js";import{F as pe}from"./Footer-DXpUb05u.js";import{a as j}from"./index-t--hEgTQ.js";import{M as H,B as E,A as fe}from"./AccountCircle-OylfuR5v.js";import{M as o}from"./MenuItem-B8k7SO3N.js";import{S as k}from"./Stack-C5OzallC.js";import{T as i}from"./TextField-CfAcrH5_.js";import{S as je,A as ge}from"./Snackbar-CAQaTgAn.js";import"./styled-CCdDrl4n.js";import"./Select-M646vS5P.js";import"./useFormControl-BR_Ve65N.js";import"./InputLabel-D7ke4Q6J.js";import"./isMuiElement-CbkzSqk0.js";import"./ClickAwayListener-DWHV8sfA.js";const ve=({users:c,handleEdit:p,handleDelete:n})=>e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"h6",sx:{mb:2},children:"User List"}),e.jsx(te,{component:L,children:e.jsxs(le,{children:[e.jsx(re,{children:e.jsx(S,{children:["ID","EPF","Employee Name","Username","Password","Department","Contact","Email","User Type","Availability","Actions"].map(a=>e.jsx(t,{sx:{fontWeight:"bold"},children:a},a))})}),e.jsx(ie,{children:c&&c.length>0?c.map(a=>e.jsxs(S,{children:[e.jsx(t,{children:a.id}),e.jsx(t,{children:a.epf}),e.jsx(t,{children:a.employeeName}),e.jsx(t,{children:a.username}),e.jsx(t,{children:a.password}),e.jsx(t,{children:a.department}),e.jsx(t,{children:a.contact}),e.jsx(t,{children:a.email}),e.jsx(t,{children:a.userType}),e.jsx(t,{children:a.availability}),e.jsxs(t,{children:[e.jsx(x,{onClick:()=>p(a.id),color:"primary",children:e.jsx(me,{})}),e.jsx(x,{onClick:()=>n(a.id),color:"error",children:e.jsx(xe,{})})]})]},a.id)):e.jsx(S,{children:e.jsx(t,{colSpan:10,align:"center",children:"No users available."})})})]})})]}),be=["IT","HR","Finance","Marketing","Operations"],ye=["Admin","User","Manager"],Ce=["Active","Inactive"],Re=()=>{const[c,p]=r.useState([]),[n,a]=r.useState({id:0,epf:"",employeeName:"",username:"",password:"",department:"",contact:"",email:"",userType:"",availability:""}),[v,N]=r.useState(null),[A,M]=r.useState(!1),[R,U]=r.useState(!1),[F,I]=r.useState(null),[B,P]=r.useState(null),[W]=r.useState(3),[b,h]=r.useState(!1),[f,y]=r.useState({open:!1,message:"",severity:"success"}),C=_();r.useEffect(()=>{(async()=>{try{h(!0);const l=await j.get("/api/users");p(l.data.data)}catch{d("Failed to fetch users","error")}finally{h(!1)}})()},[]);const d=(s,l)=>{y({open:!0,message:s,severity:l})},u=s=>{a({...n,[s.target.name]:s.target.value})},w=(s,l)=>{a({...n,[l]:s.target.value})},q=async()=>{if(!n.epf||!n.employeeName||!n.username||!n.password){d("Please fill all required fields!","error");return}try{h(!0),v!==null?(await j.put(`/api/users/${v}`,n),d("User updated successfully!","success")):(await j.post("/api/users",n),d("User created successfully!","success"));const s=await j.get("/api/users");p(s.data.data),D()}catch{d("Failed to save user","error")}finally{h(!1)}},D=()=>{a({id:0,epf:"",employeeName:"",username:"",password:"",department:"",contact:"",email:"",userType:"",availability:""}),N(null)},G=s=>{const l=c.find(Z=>Z.id===s);l&&(a(l),N(s))},V=async s=>{try{h(!0),await j.delete(`/api/users/${s}`),p(c.filter(l=>l.id!==s)),d("User deleted successfully!","success")}catch{d("Failed to delete user","error")}finally{h(!1)}},$=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},Y=s=>{I(s.currentTarget)},T=()=>{I(null)},J=()=>{C("/userProfile"),T()},K=()=>{C("/login"),T()},Q=s=>{P(s.currentTarget)},O=()=>{P(null)},X=()=>{C("/notifications"),O()};return e.jsxs(g,{sx:{display:"full",width:"95vw",height:"100vh",minHeight:"100vh"},children:[e.jsx(ee,{}),e.jsx(se,{open:A||R,setOpen:M,onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1)}),e.jsxs(g,{sx:{flexGrow:1,bgcolor:"#f5f5f5",p:2},children:[e.jsx(oe,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(ae,{children:[e.jsx(x,{edge:"start",color:"inherit",onClick:()=>M(!A),children:e.jsx(ce,{sx:{color:"black"}})}),e.jsx(m,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"User Management"}),e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(x,{onClick:Q,children:e.jsx(de,{badgeContent:W,color:"error",children:e.jsx(he,{})})}),e.jsxs(H,{anchorEl:B,open:!!B,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(o,{disabled:!0,children:e.jsxs(m,{variant:"body2",children:["You have ",W," new notifications"]})}),e.jsx(z,{}),e.jsx(o,{children:e.jsx(m,{variant:"body2",children:"Notification 1"})}),e.jsx(o,{children:e.jsx(m,{variant:"body2",children:"Notification 2"})}),e.jsx(z,{}),e.jsx(o,{onClick:X,children:e.jsx(E,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(x,{onClick:$,children:e.jsx(ue,{})}),e.jsx(x,{onClick:Y,children:e.jsx(fe,{})}),e.jsxs(H,{anchorEl:F,open:!!F,onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(o,{onClick:J,children:"User Profile"}),e.jsx(o,{onClick:K,children:"Logout"})]})]})]})}),b?e.jsx(g,{sx:{display:"flex",justifyContent:"center",mt:5},children:e.jsx(ne,{size:60})}):e.jsxs(k,{spacing:3,sx:{mt:3},children:[e.jsxs(L,{sx:{p:1.4},children:[e.jsx(m,{variant:"h6",sx:{mb:0},children:"User Details"}),e.jsxs(k,{direction:"row",spacing:1,sx:{mt:2},children:[e.jsx(i,{fullWidth:!0,label:"ID",name:"id",value:n.id,disabled:!0}),e.jsx(i,{fullWidth:!0,label:"EPF*",name:"epf",value:n.epf,onChange:u}),e.jsx(i,{fullWidth:!0,label:"Employee Name*",name:"employeeName",value:n.employeeName,onChange:u}),e.jsx(i,{fullWidth:!0,label:"Username*",name:"username",value:n.username,onChange:u}),e.jsx(i,{fullWidth:!0,label:"Password*",name:"password",type:"password",value:n.password,onChange:u}),e.jsx(i,{select:!0,fullWidth:!0,label:"Department",value:n.department,onChange:s=>w(s,"department"),children:be.map(s=>e.jsx(o,{value:s,children:s},s))}),e.jsx(i,{fullWidth:!0,label:"Contact",name:"contact",value:n.contact,onChange:u}),e.jsx(i,{fullWidth:!0,label:"Email",name:"email",value:n.email,onChange:u}),e.jsx(i,{select:!0,fullWidth:!0,label:"User Type",value:n.userType,onChange:s=>w(s,"userType"),children:ye.map(s=>e.jsx(o,{value:s,children:s},s))}),e.jsx(i,{select:!0,fullWidth:!0,label:"Availability",value:n.availability,onChange:s=>w(s,"availability"),children:Ce.map(s=>e.jsx(o,{value:s,children:s},s))})]}),e.jsxs(k,{direction:"row",spacing:2,sx:{mt:2,justifyContent:"flex-end",p:2},children:[e.jsx(E,{variant:"contained",color:"primary",onClick:q,disabled:b,children:v!==null?"Update":"Save"}),e.jsx(E,{variant:"outlined",onClick:D,disabled:b,children:"Clear"})]})]}),e.jsx(ve,{users:c,handleEdit:G,handleDelete:V})]}),e.jsx(je,{open:f.open,autoHideDuration:6e3,onClose:()=>y({...f,open:!1}),children:e.jsx(ge,{onClose:()=>y({...f,open:!1}),severity:f.severity,sx:{width:"100%"},children:f.message})})]}),e.jsx(pe,{})]})};export{Re as default};
