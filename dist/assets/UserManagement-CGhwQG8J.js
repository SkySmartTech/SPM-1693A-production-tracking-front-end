import{j as e,T as m,P as L,r as i,e as Z,B as g,f as _,i as ee,k as ae,D as z,C as se,m as j}from"./index-DbvNdllW.js";import{T as ne,a as te,b as le,c as S,d as ie}from"./TableRow-C0rWgADw.js";import{T as t}from"./TableCell-wBWqAFyv.js";import{I as x,A as re,M as oe,B as ce,N as de,F as he}from"./Notifications-j6OMPz9m.js";import{E as ue}from"./Edit-DoKI5iBo.js";import{D as me}from"./Delete-C8yZ2-gg.js";import{M as H,B as E,A as xe}from"./AccountCircle-BqrC-WHa.js";import{M as o}from"./MenuItem-BE8l7ryc.js";import{S as k}from"./Stack-D3HsYBR0.js";import{T as r}from"./TextField-CsoWppMA.js";import{S as pe,A as fe}from"./Snackbar-sTGnc7Nj.js";import"./styled-Cs-gJYMi.js";import"./Select-1bWPsc-P.js";import"./useFormControl-DDGvswHg.js";import"./InputLabel-BJ-Hgfal.js";import"./isMuiElement-qTM6GdlR.js";import"./ClickAwayListener-Ba4dolDx.js";const je=({users:c,handleEdit:p,handleDelete:n})=>e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"h6",sx:{mb:2},children:"User List"}),e.jsx(ne,{component:L,children:e.jsxs(te,{children:[e.jsx(le,{children:e.jsx(S,{children:["ID","EPF","Employee Name","Username","Password","Department","Contact","Email","User Type","Availability","Actions"].map(s=>e.jsx(t,{sx:{fontWeight:"bold"},children:s},s))})}),e.jsx(ie,{children:c&&c.length>0?c.map(s=>e.jsxs(S,{children:[e.jsx(t,{children:s.id}),e.jsx(t,{children:s.epf}),e.jsx(t,{children:s.employeeName}),e.jsx(t,{children:s.username}),e.jsx(t,{children:s.password}),e.jsx(t,{children:s.department}),e.jsx(t,{children:s.contact}),e.jsx(t,{children:s.email}),e.jsx(t,{children:s.userType}),e.jsx(t,{children:s.availability}),e.jsxs(t,{children:[e.jsx(x,{onClick:()=>p(s.id),color:"primary",children:e.jsx(ue,{})}),e.jsx(x,{onClick:()=>n(s.id),color:"error",children:e.jsx(me,{})})]})]},s.id)):e.jsx(S,{children:e.jsx(t,{colSpan:10,align:"center",children:"No users available."})})})]})})]}),ge=["IT","HR","Finance","Marketing","Operations"],ve=["Admin","User","Manager"],ye=["Active","Inactive"],Oe=()=>{const[c,p]=i.useState([]),[n,s]=i.useState({id:0,epf:"",employeeName:"",username:"",password:"",department:"",contact:"",email:"",userType:"",availability:""}),[v,N]=i.useState(null),[A,M]=i.useState(!1),[R,U]=i.useState(!1),[I,F]=i.useState(null),[B,D]=i.useState(null),[P]=i.useState(3),[y,h]=i.useState(!1),[f,b]=i.useState({open:!1,message:"",severity:"success"}),C=Z();i.useEffect(()=>{(async()=>{try{h(!0);const l=await j.get("/api/users");p(l.data.data)}catch{d("Failed to fetch users","error")}finally{h(!1)}})()},[]);const d=(a,l)=>{b({open:!0,message:a,severity:l})},u=a=>{s({...n,[a.target.name]:a.target.value})},w=(a,l)=>{s({...n,[l]:a.target.value})},q=async()=>{if(!n.epf||!n.employeeName||!n.username||!n.password){d("Please fill all required fields!","error");return}try{h(!0),v!==null?(await j.put(`/api/users/${v}`,n),d("User updated successfully!","success")):(await j.post("/api/users",n),d("User created successfully!","success"));const a=await j.get("/api/users");p(a.data.data),W()}catch{d("Failed to save user","error")}finally{h(!1)}},W=()=>{s({id:0,epf:"",employeeName:"",username:"",password:"",department:"",contact:"",email:"",userType:"",availability:""}),N(null)},G=a=>{const l=c.find(X=>X.id===a);l&&(s(l),N(a))},V=async a=>{try{h(!0),await j.delete(`/api/users/${a}`),p(c.filter(l=>l.id!==a)),d("User deleted successfully!","success")}catch{d("Failed to delete user","error")}finally{h(!1)}},$=a=>{F(a.currentTarget)},T=()=>{F(null)},Y=()=>{C("/userProfile"),T()},J=()=>{C("/login"),T()},K=a=>{D(a.currentTarget)},O=()=>{D(null)},Q=()=>{C("/notifications"),O()};return e.jsxs(g,{sx:{display:"flex",width:"100vw",height:"100vh",minHeight:"100vh"},children:[e.jsx(_,{}),e.jsx(ee,{open:A||R,setOpen:M,onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1)}),e.jsxs(g,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(re,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(ae,{children:[e.jsx(x,{edge:"start",onClick:()=>M(!A),children:e.jsx(oe,{})}),e.jsx(m,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"User Management"}),e.jsxs(g,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(x,{onClick:K,children:e.jsx(ce,{badgeContent:P,color:"error",children:e.jsx(de,{})})}),e.jsxs(H,{anchorEl:B,open:!!B,onClose:O,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(o,{disabled:!0,children:e.jsxs(m,{variant:"body2",children:["You have ",P," new notifications"]})}),e.jsx(z,{}),e.jsx(o,{children:e.jsx(m,{variant:"body2",children:"Notification 1"})}),e.jsx(o,{children:e.jsx(m,{variant:"body2",children:"Notification 2"})}),e.jsx(z,{}),e.jsx(o,{onClick:Q,children:e.jsx(E,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(x,{onClick:()=>document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen(),children:e.jsx(he,{})}),e.jsx(x,{onClick:$,children:e.jsx(xe,{})}),e.jsxs(H,{anchorEl:I,open:!!I,onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(o,{onClick:Y,children:"User Profile"}),e.jsx(o,{onClick:J,children:"Logout"})]})]})]})}),y?e.jsx(g,{sx:{display:"flex",justifyContent:"center",mt:5},children:e.jsx(se,{size:60})}):e.jsxs(k,{spacing:3,sx:{mt:3},children:[e.jsxs(L,{sx:{p:1.4},children:[e.jsx(m,{variant:"h6",sx:{mb:0},children:"User Details"}),e.jsxs(k,{direction:"row",spacing:1,sx:{mt:2},children:[e.jsx(r,{fullWidth:!0,label:"ID",name:"id",value:n.id,disabled:!0}),e.jsx(r,{fullWidth:!0,label:"EPF*",name:"epf",value:n.epf,onChange:u}),e.jsx(r,{fullWidth:!0,label:"Employee Name*",name:"employeeName",value:n.employeeName,onChange:u}),e.jsx(r,{fullWidth:!0,label:"Username*",name:"username",value:n.username,onChange:u}),e.jsx(r,{fullWidth:!0,label:"Password*",name:"password",type:"password",value:n.password,onChange:u}),e.jsx(r,{select:!0,fullWidth:!0,label:"Department",value:n.department,onChange:a=>w(a,"department"),children:ge.map(a=>e.jsx(o,{value:a,children:a},a))}),e.jsx(r,{fullWidth:!0,label:"Contact",name:"contact",value:n.contact,onChange:u}),e.jsx(r,{fullWidth:!0,label:"Email",name:"email",value:n.email,onChange:u}),e.jsx(r,{select:!0,fullWidth:!0,label:"User Type",value:n.userType,onChange:a=>w(a,"userType"),children:ve.map(a=>e.jsx(o,{value:a,children:a},a))}),e.jsx(r,{select:!0,fullWidth:!0,label:"Availability",value:n.availability,onChange:a=>w(a,"availability"),children:ye.map(a=>e.jsx(o,{value:a,children:a},a))})]}),e.jsxs(k,{direction:"row",spacing:2,sx:{mt:2,justifyContent:"flex-end",p:2},children:[e.jsx(E,{variant:"contained",color:"primary",onClick:q,disabled:y,children:v!==null?"Update":"Save"}),e.jsx(E,{variant:"outlined",onClick:W,disabled:y,children:"Clear"})]})]}),e.jsx(je,{users:c,handleEdit:G,handleDelete:V})]}),e.jsx(pe,{open:f.open,autoHideDuration:6e3,onClose:()=>b({...f,open:!1}),children:e.jsx(fe,{onClose:()=>b({...f,open:!1}),severity:f.severity,sx:{width:"100%"},children:f.message})})]})]})};export{Oe as default};
