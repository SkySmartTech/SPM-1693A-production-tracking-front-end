import{r as o,e as U,j as e,B as a,f as z,i as G,k as H,T as i,D as C}from"./index-CLjSK6S6.js";import{a as N}from"./index-t--hEgTQ.js";import{A as L,I as s,M as R,B as W,N as V,F as q}from"./Notifications-gU08fzS7.js";import{M as v,B as d,A as X}from"./AccountCircle-5jn0rp7x.js";import{F as Y}from"./Footer-DiwPU8Fx.js";import{M as r}from"./MenuItem-c_6Y_tlY.js";import{D as J}from"./DataGrid-CXSAv4bg.js";import"./Select-DWO1cG26.js";import"./useFormControl-C3t4IaDR.js";import"./ClickAwayListener-Dh7wAXjO.js";import"./styled-D5Wz6DMV.js";import"./InputLabel-l34_Zl7i.js";import"./isMuiElement-DuhCa2c8.js";import"./InputAdornment-SUBugrxU.js";import"./TextField-BS6A6mKm.js";import"./FormControlLabel-DTVFhN_-.js";import"./SwitchBase-CgmHd4ul.js";import"./TableCell-CtEhFfNa.js";const ue=()=>{const[n,k]=o.useState(null),[A,F]=o.useState([]),[h,p]=o.useState(!1),[E,f]=o.useState(!1),[u,x]=o.useState(null),[m,g]=o.useState(null),[j]=o.useState(3),l=U(),B=t=>{t.target.files&&t.target.files.length>0&&k(t.target.files[0])},D=async()=>{if(!n){alert("Please select a file first.");return}const t=new FormData;t.append("file",n);try{(await N.post("http://localhost:5000/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data.success?(w(),alert("File uploaded successfully!")):alert("Upload failed.")}catch(b){console.error("Error uploading file:",b),alert("An error occurred.")}},w=async()=>{try{const t=await N.get("http://localhost:5000/day-plans");F(t.data)}catch(t){console.error("Error fetching data:",t)}};o.useEffect(()=>{w()},[]);const M=[{field:"id",headerName:"ID",width:60},{field:"line_no",headerName:"Line No",width:50},{field:"resp_employee",headerName:"Resp Employee",width:100},{field:"buyer",headerName:"Buyer",width:80},{field:"style",headerName:"Style",width:80},{field:"gg",headerName:"GG",width:60},{field:"smv",headerName:"SMV",width:80},{field:"display_wh",headerName:"Display WH",width:90},{field:"actual_wh",headerName:"Actual WH",width:90},{field:"plan_tgt_pcs",headerName:"Plan Tgt Pcs",width:100},{field:"per_hour_pcs",headerName:"Per Hour Pcs",width:100},{field:"available_cader",headerName:"Available Cader",width:120},{field:"present_linkers",headerName:"Present Linkers",width:100},{field:"status",headerName:"Status",width:90},{field:"created_at",headerName:"Created At",width:90},{field:"updated_at",headerName:"Updated At",width:90}],S=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},P=t=>{x(t.currentTarget)},c=()=>{x(null)},_=()=>{l("/userProfile"),c()},I=()=>{l("/login"),c()},O=t=>{g(t.currentTarget)},y=()=>{g(null)},T=()=>{l("/notifications"),y()};return e.jsxs(a,{sx:{display:"flex",flexDirection:"column",width:"95vw",height:"100vh",minHeight:"100vh"},children:[e.jsx(z,{}),e.jsx(G,{open:h||E,setOpen:p,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)}),e.jsxs(a,{sx:{flexGrow:1,bgcolor:"#f5f5f5",p:2},children:[e.jsx(L,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(H,{children:[e.jsx(s,{edge:"start",color:"inherit",onClick:()=>p(!h),children:e.jsx(R,{sx:{color:"black"}})}),e.jsx(i,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"Day Plan"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(s,{onClick:O,children:e.jsx(W,{badgeContent:j,color:"error",children:e.jsx(V,{})})}),e.jsxs(v,{anchorEl:m,open:!!m,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(r,{disabled:!0,children:e.jsxs(i,{variant:"body2",children:["You have ",j," new notifications"]})}),e.jsx(C,{}),e.jsx(r,{children:e.jsx(i,{variant:"body2",children:"Notification 1"})}),e.jsx(r,{children:e.jsx(i,{variant:"body2",children:"Notification 2"})}),e.jsx(C,{}),e.jsx(r,{onClick:T,children:e.jsx(d,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(s,{onClick:S,children:e.jsx(q,{})}),e.jsx(s,{onClick:P,children:e.jsx(X,{})}),e.jsxs(v,{anchorEl:u,open:!!u,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(r,{onClick:_,children:"User Profile"}),e.jsx(r,{onClick:I,children:"Logout"})]})]})]})}),e.jsxs(a,{sx:{padding:3,backgroundColor:"#f9f9f9",borderRadius:"8px"},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:"bold",marginBottom:2},children:"Day Plan Upload"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,marginBottom:2},children:[e.jsx("input",{type:"file",accept:".xlsx",onChange:B,style:{display:"none"},id:"file-input"}),e.jsx("label",{htmlFor:"file-input",children:e.jsx(d,{variant:"contained",component:"span",sx:{backgroundColor:"#FFD900",color:"black","&:hover":{backgroundColor:"#E6C200"}},children:"Choose File"})}),e.jsx(i,{children:n?n.name:"No file chosen"}),e.jsx(a,{sx:{flexGrow:1}}),e.jsx(d,{variant:"contained",color:"primary",onClick:D,children:"Upload"})]}),e.jsx(a,{sx:{height:400,width:"100%",backgroundColor:"white",borderRadius:"8px",overflowX:"auto"},children:e.jsx(J,{rows:A,columns:M,pageSizeOptions:[5,10,20]})})]})]}),e.jsx(Y,{})]})};export{ue as default};
