import{o as S,m as k,r as l,p as R,j as e,t as U,q as N,w as E,y as te,U as X,T as C,P as se,e as he,B as A,f as me,i as fe,k as xe,D as Y,C as be}from"./index-CLjSK6S6.js";import{T as ve,a as z,b as h}from"./TableCell-CtEhFfNa.js";import{I as T,A as ye,M as je,B as ge,N as Ce,F as Te}from"./Notifications-gU08fzS7.js";import{E as we}from"./Edit-Bsxz9CJI.js";import{D as Me}from"./Delete-Bkl1pz_A.js";import{F as Se}from"./Footer-DiwPU8Fx.js";import{a as M}from"./index-t--hEgTQ.js";import{M as J,B as P,A as ke}from"./AccountCircle-5jn0rp7x.js";import{M as x}from"./MenuItem-c_6Y_tlY.js";import{S as D}from"./Stack-B0JblR4S.js";import{T as m}from"./TextField-BS6A6mKm.js";import{S as Re,A as Ue}from"./Snackbar-Deu9xmKx.js";import"./styled-D5Wz6DMV.js";import"./Select-DWO1cG26.js";import"./useFormControl-C3t4IaDR.js";import"./InputLabel-l34_Zl7i.js";import"./isMuiElement-DuhCa2c8.js";import"./ClickAwayListener-Dh7wAXjO.js";function Ne(t){return S("MuiTable",t)}k("MuiTable",["root","stickyHeader"]);const Ee=t=>{const{classes:a,stickyHeader:s}=t;return E({root:["root",s&&"stickyHeader"]},Ne,a)},He=U("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:s}=t;return[a.root,s.stickyHeader&&a.stickyHeader]}})(te(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:a})=>a.stickyHeader,style:{borderCollapse:"separate"}}]}))),K="table",Ae=l.forwardRef(function(a,s){const o=R({props:a,name:"MuiTable"}),{className:c,component:r=K,padding:d="normal",size:i="medium",stickyHeader:u=!1,...f}=o,b={...o,component:r,padding:d,size:i,stickyHeader:u},y=Ee(b),H=l.useMemo(()=>({padding:d,size:i,stickyHeader:u}),[d,i,u]);return e.jsx(ve.Provider,{value:H,children:e.jsx(He,{as:r,role:r===K?null:"table",ref:s,className:N(y.root,c),ownerState:b,...f})})});function Be(t){return S("MuiTableBody",t)}k("MuiTableBody",["root"]);const Fe=t=>{const{classes:a}=t;return E({root:["root"]},Be,a)},$e=U("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-row-group"}),Oe={variant:"body"},Q="tbody",Ie=l.forwardRef(function(a,s){const o=R({props:a,name:"MuiTableBody"}),{className:c,component:r=Q,...d}=o,i={...o,component:r},u=Fe(i);return e.jsx(z.Provider,{value:Oe,children:e.jsx($e,{className:N(u.root,c),as:r,ref:s,role:r===Q?null:"rowgroup",ownerState:i,...d})})});function Pe(t){return S("MuiTableContainer",t)}k("MuiTableContainer",["root"]);const De=t=>{const{classes:a}=t;return E({root:["root"]},Pe,a)},We=U("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(t,a)=>a.root})({width:"100%",overflowX:"auto"}),ze=l.forwardRef(function(a,s){const o=R({props:a,name:"MuiTableContainer"}),{className:c,component:r="div",...d}=o,i={...o,component:r},u=De(i);return e.jsx(We,{ref:s,as:r,className:N(u.root,c),ownerState:i,...d})});function Le(t){return S("MuiTableHead",t)}k("MuiTableHead",["root"]);const qe=t=>{const{classes:a}=t;return E({root:["root"]},Le,a)},Ge=U("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-header-group"}),Ve={variant:"head"},Z="thead",Xe=l.forwardRef(function(a,s){const o=R({props:a,name:"MuiTableHead"}),{className:c,component:r=Z,...d}=o,i={...o,component:r},u=qe(i);return e.jsx(z.Provider,{value:Ve,children:e.jsx(Ge,{as:r,className:N(u.root,c),ref:s,role:r===Z?null:"rowgroup",ownerState:i,...d})})});function Ye(t){return S("MuiTableRow",t)}const _=k("MuiTableRow",["root","selected","hover","head","footer"]),Je=t=>{const{classes:a,selected:s,hover:o,head:c,footer:r}=t;return E({root:["root",s&&"selected",o&&"hover",c&&"head",r&&"footer"]},Ye,a)},Ke=U("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:s}=t;return[a.root,s.head&&a.head,s.footer&&a.footer]}})(te(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${_.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${_.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:X(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:X(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}))),ee="tr",W=l.forwardRef(function(a,s){const o=R({props:a,name:"MuiTableRow"}),{className:c,component:r=ee,hover:d=!1,selected:i=!1,...u}=o,f=l.useContext(z),b={...o,component:r,hover:d,selected:i,head:f&&f.variant==="head",footer:f&&f.variant==="footer"},y=Je(b);return e.jsx(Ke,{as:r,ref:s,className:N(y.root,c),role:r===ee?null:"row",ownerState:b,...u})}),Qe=({users:t,handleEdit:a,handleDelete:s})=>e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"h6",sx:{mb:2},children:"User List"}),e.jsx(ze,{component:se,children:e.jsxs(Ae,{children:[e.jsx(Xe,{children:e.jsx(W,{children:["ID","EPF","Employee Name","Username","Department","Contact","Email","User Type","Status","Actions"].map(o=>e.jsx(h,{sx:{fontWeight:"bold"},children:o},o))})}),e.jsx(Ie,{children:t&&t.length>0?t.map(o=>e.jsxs(W,{children:[e.jsx(h,{children:o.id}),e.jsx(h,{children:o.epf}),e.jsx(h,{children:o.employeeName}),e.jsx(h,{children:o.username}),e.jsx(h,{children:o.department}),e.jsx(h,{children:o.contact}),e.jsx(h,{children:o.email}),e.jsx(h,{children:o.userType}),e.jsx(h,{children:o.availability}),e.jsxs(h,{children:[e.jsx(T,{onClick:()=>a(o.id),color:"primary",children:e.jsx(we,{})}),e.jsx(T,{onClick:()=>s(o.id),color:"error",children:e.jsx(Me,{})})]})]},o.id)):e.jsx(W,{children:e.jsx(h,{colSpan:10,align:"center",children:"No users available."})})})]})})]}),Ze=["IT","HR","Finance","Marketing","Operations"],_e=["Admin","User","Manager"],et=["Active","Inactive"],yt=()=>{const[t,a]=l.useState([]),[s,o]=l.useState({id:0,epf:"",employeeName:"",username:"",password:"",department:"",contact:"",email:"",userType:"",availability:""}),[c,r]=l.useState(null),[d,i]=l.useState(!1),[u,f]=l.useState(!1),[b,y]=l.useState(null),[H,L]=l.useState(null),[q]=l.useState(3),[B,j]=l.useState(!1),[w,F]=l.useState({open:!1,message:"",severity:"success"}),$=he();l.useEffect(()=>{(async()=>{try{j(!0);const p=await M.get("/api/users");a(p.data.data)}catch{v("Failed to fetch users","error")}finally{j(!1)}})()},[]);const v=(n,p)=>{F({open:!0,message:n,severity:p})},g=n=>{o({...s,[n.target.name]:n.target.value})},O=(n,p)=>{o({...s,[p]:n.target.value})},ae=async()=>{if(!s.epf||!s.employeeName||!s.username||!s.password){v("Please fill all required fields!","error");return}try{j(!0),c!==null?(await M.put(`/api/users/${c}`,s),v("User updated successfully!","success")):(await M.post("/api/users",s),v("User created successfully!","success"));const n=await M.get("/api/users");a(n.data.data),G()}catch{v("Failed to save user","error")}finally{j(!1)}},G=()=>{o({id:0,epf:"",employeeName:"",username:"",password:"",department:"",contact:"",email:"",userType:"",availability:""}),r(null)},oe=n=>{const p=t.find(pe=>pe.id===n);p&&(o(p),r(n))},ne=async n=>{try{j(!0),await M.delete(`/api/users/${n}`),a(t.filter(p=>p.id!==n)),v("User deleted successfully!","success")}catch{v("Failed to delete user","error")}finally{j(!1)}},re=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},le=n=>{y(n.currentTarget)},I=()=>{y(null)},ie=()=>{$("/userProfile"),I()},ce=()=>{$("/login"),I()},de=n=>{L(n.currentTarget)},V=()=>{L(null)},ue=()=>{$("/notifications"),V()};return e.jsxs(A,{sx:{display:"full",width:"95vw",height:"100vh",minHeight:"100vh"},children:[e.jsx(me,{}),e.jsx(fe,{open:d||u,setOpen:i,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)}),e.jsxs(A,{sx:{flexGrow:1,bgcolor:"#f5f5f5",p:2},children:[e.jsx(ye,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(xe,{children:[e.jsx(T,{edge:"start",color:"inherit",onClick:()=>i(!d),children:e.jsx(je,{sx:{color:"black"}})}),e.jsx(C,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"User Management"}),e.jsxs(A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(T,{onClick:de,children:e.jsx(ge,{badgeContent:q,color:"error",children:e.jsx(Ce,{})})}),e.jsxs(J,{anchorEl:H,open:!!H,onClose:V,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(x,{disabled:!0,children:e.jsxs(C,{variant:"body2",children:["You have ",q," new notifications"]})}),e.jsx(Y,{}),e.jsx(x,{children:e.jsx(C,{variant:"body2",children:"Notification 1"})}),e.jsx(x,{children:e.jsx(C,{variant:"body2",children:"Notification 2"})}),e.jsx(Y,{}),e.jsx(x,{onClick:ue,children:e.jsx(P,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(T,{onClick:re,children:e.jsx(Te,{})}),e.jsx(T,{onClick:le,children:e.jsx(ke,{})}),e.jsxs(J,{anchorEl:b,open:!!b,onClose:I,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(x,{onClick:ie,children:"User Profile"}),e.jsx(x,{onClick:ce,children:"Logout"})]})]})]})}),B?e.jsx(A,{sx:{display:"flex",justifyContent:"center",mt:5},children:e.jsx(be,{size:60})}):e.jsxs(D,{spacing:3,sx:{mt:3},children:[e.jsxs(se,{sx:{p:1.4},children:[e.jsx(C,{variant:"h6",sx:{mb:0},children:"User Details"}),e.jsxs(D,{direction:"row",spacing:1,sx:{mt:2},children:[e.jsx(m,{fullWidth:!0,label:"ID",name:"id",value:s.id,disabled:!0}),e.jsx(m,{fullWidth:!0,label:"EPF*",name:"epf",value:s.epf,onChange:g}),e.jsx(m,{fullWidth:!0,label:"Employee Name*",name:"employeeName",value:s.employeeName,onChange:g}),e.jsx(m,{fullWidth:!0,label:"Username*",name:"username",value:s.username,onChange:g}),e.jsx(m,{fullWidth:!0,label:"Password*",name:"password",type:"password",value:s.password,onChange:g}),e.jsx(m,{select:!0,fullWidth:!0,label:"Department",value:s.department,onChange:n=>O(n,"department"),children:Ze.map(n=>e.jsx(x,{value:n,children:n},n))}),e.jsx(m,{fullWidth:!0,label:"Contact",name:"contact",value:s.contact,onChange:g}),e.jsx(m,{fullWidth:!0,label:"Email",name:"email",value:s.email,onChange:g}),e.jsx(m,{select:!0,fullWidth:!0,label:"User Type",value:s.userType,onChange:n=>O(n,"userType"),children:_e.map(n=>e.jsx(x,{value:n,children:n},n))}),e.jsx(m,{select:!0,fullWidth:!0,label:"Availability",value:s.availability,onChange:n=>O(n,"availability"),children:et.map(n=>e.jsx(x,{value:n,children:n},n))})]}),e.jsxs(D,{direction:"row",spacing:2,sx:{mt:2,justifyContent:"flex-end",p:2},children:[e.jsx(P,{variant:"contained",color:"primary",onClick:ae,disabled:B,children:c!==null?"Update":"Save"}),e.jsx(P,{variant:"outlined",onClick:G,disabled:B,children:"Clear"})]})]}),e.jsx(Qe,{users:t,handleEdit:oe,handleDelete:ne})]}),e.jsx(Re,{open:w.open,autoHideDuration:6e3,onClose:()=>F({...w,open:!1}),children:e.jsx(Ue,{onClose:()=>F({...w,open:!1}),severity:w.severity,sx:{width:"100%"},children:w.message})})]}),e.jsx(Se,{})]})};export{yt as default};
