import{r as a,o as K,p as Q,q as X,M as O,t as q,v as G,aO as ve,j as e,x as _,P as J,z as V,y as je,e as Me,B as T,f as Ce,i as Se,k as we,T as h,D as ne,C as Ae,E as te}from"./index-DbvNdllW.js";import{A as Re,I as z,M as ke,B as Pe,N as De,F as Ee}from"./Notifications-j6OMPz9m.js";import{M as ue,B as Z,A as Ne}from"./AccountCircle-BqrC-WHa.js";import{M as F}from"./MenuItem-BE8l7ryc.js";import{b as Te,S as Fe}from"./Select-1bWPsc-P.js";import{S as Ge,A as Ie}from"./Snackbar-sTGnc7Nj.js";import{u as We,a as Ue}from"./useFormControl-DDGvswHg.js";import{F as ae,C as ie}from"./FormControlLabel-BtOoiiGH.js";import"./ClickAwayListener-Ba4dolDx.js";import"./SwitchBase-Cr_0Qc_S.js";const me=a.createContext({});function Be(s){return Q("MuiAccordion",s)}const Y=K("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),Oe=s=>{const{classes:r,square:n,expanded:t,disabled:d,disableGutters:p}=s;return _({root:["root",!n&&"rounded",t&&"expanded",d&&"disabled",!p&&"gutters"],heading:["heading"],region:["region"]},Be,r)},Ve=G(J,{name:"MuiAccordion",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:n}=s;return[{[`& .${Y.region}`]:r.region},r.root,!n.square&&r.rounded,!n.disableGutters&&r.gutters]}})(V(({theme:s})=>{const r={duration:s.transitions.duration.shortest};return{position:"relative",transition:s.transitions.create(["margin"],r),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(s.vars||s).palette.divider,transition:s.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Y.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Y.disabled}`]:{backgroundColor:(s.vars||s).palette.action.disabledBackground}}}),V(({theme:s})=>({variants:[{props:r=>!r.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(s.vars||s).shape.borderRadius,borderTopRightRadius:(s.vars||s).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(s.vars||s).shape.borderRadius,borderBottomRightRadius:(s.vars||s).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:r=>!r.disableGutters,style:{[`&.${Y.expanded}`]:{margin:"16px 0"}}}]}))),$e=G("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(s,r)=>r.heading})({all:"unset"}),le=a.forwardRef(function(r,n){const t=X({props:r,name:"MuiAccordion"}),{children:d,className:p,defaultExpanded:c=!1,disabled:f=!1,disableGutters:y=!1,expanded:M,onChange:C,square:P=!1,slots:S={},slotProps:x={},TransitionComponent:D,TransitionProps:E,...I}=t,[u,b]=We({controlled:M,default:c,name:"Accordion",state:"expanded"}),v=a.useCallback(re=>{b(!u),C&&C(re,!u)},[u,C,b]),[w,...A]=a.Children.toArray(d),R=a.useMemo(()=>({expanded:u,disabled:f,disableGutters:y,toggle:v}),[u,f,y,v]),j={...t,square:P,disabled:f,disableGutters:y,expanded:u},m=Oe(j),$={transition:D,...S},g={transition:E,...x},k={slots:$,slotProps:g},[W,ee]=O("root",{elementType:Ve,externalForwardedProps:{...k,...I},className:q(m.root,p),shouldForwardComponentProp:!0,ownerState:j,ref:n,additionalProps:{square:P}}),[H,se]=O("heading",{elementType:$e,externalForwardedProps:k,className:m.heading,ownerState:j}),[oe,L]=O("transition",{elementType:ve,externalForwardedProps:k,ownerState:j});return e.jsxs(W,{...ee,children:[e.jsx(H,{...se,children:e.jsx(me.Provider,{value:R,children:w})}),e.jsx(oe,{in:u,timeout:"auto",...L,children:e.jsx("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:m.region,children:A})})]})});function Le(s){return Q("MuiAccordionDetails",s)}K("MuiAccordionDetails",["root"]);const qe=s=>{const{classes:r}=s;return _({root:["root"]},Le,r)},He=G("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(s,r)=>r.root})(V(({theme:s})=>({padding:s.spacing(1,2,2)}))),ce=a.forwardRef(function(r,n){const t=X({props:r,name:"MuiAccordionDetails"}),{className:d,...p}=t,c=t,f=qe(c);return e.jsx(He,{className:q(f.root,d),ref:n,ownerState:c,...p})});function ze(s){return Q("MuiAccordionSummary",s)}const B=K("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Ze=s=>{const{classes:r,expanded:n,disabled:t,disableGutters:d}=s;return _({root:["root",n&&"expanded",t&&"disabled",!d&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!d&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},ze,r)},Ye=G(je,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(s,r)=>r.root})(V(({theme:s})=>{const r={duration:s.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:s.spacing(0,2),transition:s.transitions.create(["min-height","background-color"],r),[`&.${B.focusVisible}`]:{backgroundColor:(s.vars||s).palette.action.focus},[`&.${B.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity},[`&:hover:not(.${B.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${B.expanded}`]:{minHeight:64}}}]}})),Je=G("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(s,r)=>r.content})(V(({theme:s})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:r=>!r.disableGutters,style:{transition:s.transitions.create(["margin"],{duration:s.transitions.duration.shortest}),[`&.${B.expanded}`]:{margin:"20px 0"}}}]}))),Ke=G("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(s,r)=>r.expandIconWrapper})(V(({theme:s})=>({display:"flex",color:(s.vars||s).palette.action.active,transform:"rotate(0deg)",transition:s.transitions.create("transform",{duration:s.transitions.duration.shortest}),[`&.${B.expanded}`]:{transform:"rotate(180deg)"}}))),de=a.forwardRef(function(r,n){const t=X({props:r,name:"MuiAccordionSummary"}),{children:d,className:p,expandIcon:c,focusVisibleClassName:f,onClick:y,slots:M,slotProps:C,...P}=t,{disabled:S=!1,disableGutters:x,expanded:D,toggle:E}=a.useContext(me),I=g=>{E&&E(g),y&&y(g)},u={...t,expanded:D,disabled:S,disableGutters:x},b=Ze(u),v={slots:M,slotProps:C},[w,A]=O("root",{ref:n,shouldForwardComponentProp:!0,className:q(b.root,p),elementType:Ye,externalForwardedProps:{...v,...P},ownerState:u,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:S,"aria-expanded":D,focusVisibleClassName:q(b.focusVisible,f)},getSlotProps:g=>({...g,onClick:k=>{var W;(W=g.onClick)==null||W.call(g,k),I(k)}})}),[R,j]=O("content",{className:b.content,elementType:Je,externalForwardedProps:v,ownerState:u}),[m,$]=O("expandIconWrapper",{className:b.expandIconWrapper,elementType:Ke,externalForwardedProps:v,ownerState:u});return e.jsxs(w,{...A,children:[e.jsx(R,{...j,children:d}),c&&e.jsx(m,{...$,children:c})]})});function Qe(s){return Q("MuiFormGroup",s)}K("MuiFormGroup",["root","row","error"]);const Xe=s=>{const{classes:r,row:n,error:t}=s;return _({root:["root",n&&"row",t&&"error"]},Qe,r)},_e=G("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(s,r)=>{const{ownerState:n}=s;return[r.root,n.row&&r.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),pe=a.forwardRef(function(r,n){const t=X({props:r,name:"MuiFormGroup"}),{className:d,row:p=!1,...c}=t,f=Ue(),y=Te({props:t,muiFormControl:f,states:["error"]}),M={...t,row:p,error:y.error},C=Xe(M);return e.jsx(_e,{className:q(C.root,d),ownerState:M,ref:n,...c})}),U=[{name:"Admin",description:"Full system access",type:"admin",permissions:{adminDashboard:!0,userManagement:!0,roleManagement:!0,systemSettings:!0,auditLogs:!0,backupRestore:!0,apiManagement:!0,reportGeneration:!0,dataExport:!0,systemMonitoring:!0,managerDashboard:!1,workOrderManagement:!1,teamManagement:!1,performanceReports:!1,inventoryView:!1,maintenanceScheduling:!1,costAnalysis:!1,kpiMonitoring:!1,documentManagement:!1,approvalWorkflows:!1,supplierDashboard:!1,partsCatalog:!1,orderManagement:!1,deliveryTracking:!1,invoiceSubmission:!1,inventoryManagement:!1,contractView:!1,serviceRequests:!1,complianceDocuments:!1,performanceMetrics:!1}},{name:"Manager",description:"Team management access",type:"manager",permissions:{adminDashboard:!1,userManagement:!1,roleManagement:!1,systemSettings:!1,auditLogs:!1,backupRestore:!1,apiManagement:!1,reportGeneration:!1,dataExport:!1,systemMonitoring:!1,managerDashboard:!0,workOrderManagement:!0,teamManagement:!0,performanceReports:!0,inventoryView:!0,maintenanceScheduling:!0,costAnalysis:!0,kpiMonitoring:!0,documentManagement:!0,approvalWorkflows:!0,supplierDashboard:!1,partsCatalog:!1,orderManagement:!1,deliveryTracking:!1,invoiceSubmission:!1,inventoryManagement:!1,contractView:!1,serviceRequests:!1,complianceDocuments:!1,performanceMetrics:!1}},{name:"Supplier",description:"Vendor access",type:"supplier",permissions:{adminDashboard:!1,userManagement:!1,roleManagement:!1,systemSettings:!1,auditLogs:!1,backupRestore:!1,apiManagement:!1,reportGeneration:!1,dataExport:!1,systemMonitoring:!1,managerDashboard:!1,workOrderManagement:!1,teamManagement:!1,performanceReports:!1,inventoryView:!1,maintenanceScheduling:!1,costAnalysis:!1,kpiMonitoring:!1,documentManagement:!1,approvalWorkflows:!1,supplierDashboard:!0,partsCatalog:!0,orderManagement:!0,deliveryTracking:!0,invoiceSubmission:!0,inventoryManagement:!0,contractView:!0,serviceRequests:!0,complianceDocuments:!0,performanceMetrics:!0}}],ds=()=>{const[s,r]=a.useState(U),[n,t]=a.useState("Admin"),[d,p]=a.useState("Full system access"),[c,f]=a.useState("admin"),[y,M]=a.useState(!1),[C,P]=a.useState(!1);a.useState(!1);const[S,x]=a.useState(!1),[D,E]=a.useState(null),[I,u]=a.useState(null),[b]=a.useState(3),v=Me(),[w,A]=a.useState(U[0].permissions),[R,j]=a.useState({open:!1,message:"",severity:"success"});a.useEffect(()=>{(async()=>{try{x(!0)}catch(i){console.error("Error fetching roles:",i),m("Failed to fetch roles","error"),r(U)}finally{x(!1)}})()},[]);const m=(o,i)=>{j({open:!0,message:o,severity:i})},$=o=>{E(o.currentTarget)},g=()=>{E(null)},k=()=>{v("/userProfile"),g()},W=()=>{v("/login"),g()},ee=o=>{u(o.currentTarget)},H=()=>{u(null)},se=()=>{v("/notifications"),H()},oe=o=>{const i=o.target.value;t(i);const l=s.find(N=>N.name===i);l&&(p(l.description),f(l.type),A(l.permissions))},L=o=>i=>{A(l=>({...l,[o]:i.target.checked}))},re=async()=>{try{x(!0),m("Permissions updated successfully!","success")}catch(o){console.error("Error updating permissions:",o),m("Failed to update permissions","error")}finally{x(!1)}},fe=async()=>{var i;const o=prompt("Enter new role name:");if(o){const l=prompt("Enter role type (admin, manager, or supplier):");if(l==="admin"||l==="manager"||l==="supplier")try{x(!0);const N={name:o,type:l,description:"",permissions:((i=U.find(be=>be.type===l))==null?void 0:i.permissions)||U[0].permissions};r([...s,N]),t(o),p(N.description),f(l),A(N.permissions),m("New role added successfully!","success")}catch(N){console.error("Error adding role:",N),m("Failed to add new role","error")}finally{x(!1)}else m("Invalid role type. Must be admin, manager, or supplier","error")}},ge=async()=>{if(window.confirm("Are you sure you want to delete this role?"))try{x(!0);const o=s.filter(i=>i.name!==n);r(o),o.length>0?(t(o[0].name),p(o[0].description),f(o[0].type),A(o[0].permissions)):(t(""),p(""),A(U[0].permissions)),m("Role deleted successfully!","success")}catch(o){console.error("Error deleting role:",o),m("Failed to delete role","error")}finally{x(!1)}},xe=()=>e.jsxs(le,{defaultExpanded:c==="admin",children:[e.jsx(de,{expandIcon:e.jsx(te,{}),children:e.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:"Admin Permissions"})}),e.jsx(ce,{children:e.jsx(pe,{children:Object.entries(w).filter(([o])=>o.includes("admin")||["userManagement","roleManagement","systemSettings","auditLogs","backupRestore","apiManagement","reportGeneration","dataExport","systemMonitoring"].includes(o)).map(([o,i])=>e.jsx(ae,{control:e.jsx(ie,{checked:i,onChange:L(o)}),label:o.replace(/([A-Z])/g," $1").replace(/^./,l=>l.toUpperCase())},o))})})]}),he=()=>e.jsxs(le,{defaultExpanded:c==="manager",children:[e.jsx(de,{expandIcon:e.jsx(te,{}),children:e.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:"Manager Permissions"})}),e.jsx(ce,{children:e.jsx(pe,{children:Object.entries(w).filter(([o])=>o.includes("manager")||["workOrderManagement","teamManagement","performanceReports","inventoryView","maintenanceScheduling","costAnalysis","kpiMonitoring","documentManagement","approvalWorkflows"].includes(o)).map(([o,i])=>e.jsx(ae,{control:e.jsx(ie,{checked:i,onChange:L(o)}),label:o.replace(/([A-Z])/g," $1").replace(/^./,l=>l.toUpperCase())},o))})})]}),ye=()=>e.jsxs(le,{defaultExpanded:c==="supplier",children:[e.jsx(de,{expandIcon:e.jsx(te,{}),children:e.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:"Supplier Permissions"})}),e.jsx(ce,{children:e.jsx(pe,{children:Object.entries(w).filter(([o])=>o.includes("supplier")||["partsCatalog","orderManagement","deliveryTracking","invoiceSubmission","inventoryManagement","contractView","serviceRequests","complianceDocuments","performanceMetrics"].includes(o)).map(([o,i])=>e.jsx(ae,{control:e.jsx(ie,{checked:i,onChange:L(o)}),label:o.replace(/([A-Z])/g," $1").replace(/^./,l=>l.toUpperCase())},o))})})]});return e.jsxs(T,{sx:{display:"flex",width:"100vw",height:"100vh",minHeight:"100vh"},children:[e.jsx(Ce,{}),e.jsx(Se,{open:y||C,setOpen:M,onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1)}),e.jsxs(T,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(Re,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(we,{children:[e.jsx(z,{edge:"start",onClick:()=>M(!y),children:e.jsx(ke,{})}),e.jsx(h,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"User Access Management System"}),e.jsxs(T,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(z,{onClick:ee,children:e.jsx(Pe,{badgeContent:b,color:"error",children:e.jsx(De,{})})}),e.jsxs(ue,{anchorEl:I,open:!!I,onClose:H,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(F,{disabled:!0,children:e.jsxs(h,{variant:"body2",children:["You have ",b," new notifications"]})}),e.jsx(ne,{}),e.jsx(F,{children:e.jsx(h,{variant:"body2",children:"Notification 1"})}),e.jsx(F,{children:e.jsx(h,{variant:"body2",children:"Notification 2"})}),e.jsx(ne,{}),e.jsx(F,{onClick:se,children:e.jsx(Z,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(z,{onClick:()=>document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen(),children:e.jsx(Ee,{})}),e.jsx(z,{onClick:$,children:e.jsx(Ne,{})}),e.jsxs(ue,{anchorEl:D,open:!!D,onClose:g,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(F,{onClick:k,children:"User Profile"}),e.jsx(F,{onClick:W,children:"Logout"})]})]})]})}),e.jsxs(T,{sx:{p:3},children:[e.jsxs(J,{elevation:3,sx:{p:3,mb:3},children:[e.jsxs(T,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",width:"100%"},children:[e.jsx(h,{children:"User Role:"}),e.jsx(Fe,{value:n,onChange:oe,sx:{minWidth:200},displayEmpty:!0,children:s.map(o=>e.jsx(F,{value:o.name,children:o.name},o.name))}),e.jsxs(T,{sx:{display:"flex",gap:2,marginLeft:"auto"},children:[e.jsx(Z,{variant:"contained",color:"primary",onClick:re,disabled:!n||S,sx:{minWidth:100},children:S?e.jsx(Ae,{size:24}):"Update"}),e.jsx(Z,{variant:"contained",color:"secondary",onClick:fe,disabled:S,sx:{minWidth:100},children:"New"}),e.jsx(Z,{variant:"contained",color:"error",onClick:ge,disabled:!n||S,sx:{minWidth:100},children:"Delete"})]})]}),n&&e.jsxs(T,{sx:{mt:2},children:[e.jsxs(h,{variant:"subtitle1",children:[e.jsx("strong",{children:"Role Type:"})," ",c.charAt(0).toUpperCase()+c.slice(1)]}),e.jsxs(h,{variant:"subtitle1",children:[e.jsx("strong",{children:"Description:"})," ",d||"No description available"]})]})]}),n?e.jsxs(J,{elevation:3,sx:{p:3},children:[e.jsx(h,{variant:"h5",sx:{mb:2},children:"Role Permissions"}),e.jsx(ne,{sx:{mb:3}}),xe(),he(),ye()]}):e.jsx(J,{elevation:3,sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",children:"Please select a role to view or edit permissions"})})]})]}),e.jsx(Ge,{open:R.open,autoHideDuration:6e3,onClose:()=>j({...R,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(Ie,{onClose:()=>j({...R,open:!1}),severity:R.severity,sx:{width:"100%"},children:R.message})})]})};export{ds as default};
