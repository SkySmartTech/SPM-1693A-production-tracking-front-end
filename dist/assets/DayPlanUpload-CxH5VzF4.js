import{m as N,r as o,e as U,a0 as L,j as e,B as a,f as T,i as z,k as G,T as i,D as C}from"./index-DbvNdllW.js";import{A as H,I as s,M as R,B as W,N as q,F as V}from"./Notifications-j6OMPz9m.js";import{M as b,B as c,A as K}from"./AccountCircle-BqrC-WHa.js";import{M as n}from"./MenuItem-BE8l7ryc.js";import{D as Q}from"./DataGrid-L6zcZlJN.js";import"./Select-1bWPsc-P.js";import"./useFormControl-DDGvswHg.js";import"./ClickAwayListener-Ba4dolDx.js";import"./styled-Cs-gJYMi.js";import"./InputLabel-BJ-Hgfal.js";import"./isMuiElement-qTM6GdlR.js";import"./InputAdornment-COHC8bxC.js";import"./TextField-CsoWppMA.js";import"./FormControlLabel-BtOoiiGH.js";import"./SwitchBase-Cr_0Qc_S.js";import"./KeyboardArrowRight-vsqFBlkf.js";import"./TableCell-wBWqAFyv.js";async function X(){return(await N.get("/api/day-plans")).data}const ue=()=>{const[r,v]=o.useState(null),[h,p]=o.useState(!1),[k,u]=o.useState(!1),[f,x]=o.useState(null),[m,g]=o.useState(null),[j]=o.useState(3),l=U(),{data:A,isLoading:P,isError:B}=L({queryKey:["day-plans"],queryFn:X}),D=t=>{t.target.files&&t.target.files.length>0&&v(t.target.files[0])},E=async()=>{if(!r){alert("Please select a file first.");return}const t=new FormData;t.append("file",r);try{(await N.post("https://perahara.lk/SPM-1693A-backend-production-tracking/public/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data.success?alert("File uploaded successfully!"):alert("Upload failed.")}catch(w){console.error("Error uploading file:",w),alert("An error occurred.")}},M=[{field:"id",headerName:"ID",width:60},{field:"line_no",headerName:"Line No",width:50},{field:"resp_employee",headerName:"Resp Employee",width:100},{field:"buyer",headerName:"Buyer",width:80},{field:"style",headerName:"Style",width:80},{field:"gg",headerName:"GG",width:60},{field:"smv",headerName:"SMV",width:80},{field:"display_wh",headerName:"Display WH",width:90},{field:"actual_wh",headerName:"Actual WH",width:90},{field:"plan_tgt_pcs",headerName:"Plan Tgt Pcs",width:100},{field:"per_hour_pcs",headerName:"Per Hour Pcs",width:100},{field:"available_cader",headerName:"Available Cader",width:120},{field:"present_linkers",headerName:"Present Linkers",width:100},{field:"status",headerName:"Status",width:90},{field:"created_at",headerName:"Created At",width:90},{field:"updated_at",headerName:"Updated At",width:90}],S=t=>{x(t.currentTarget)},d=()=>{x(null)},F=()=>{l("/userProfile"),d()},I=()=>{l("/login"),d()},_=t=>{g(t.currentTarget)},y=()=>{g(null)},O=()=>{l("/notifications"),y()};return e.jsxs(a,{sx:{display:"flex",width:"100vw",height:"100vh",minHeight:"100vh"},children:[e.jsx(T,{}),e.jsx(z,{open:h||k,setOpen:p,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)}),e.jsxs(a,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(H,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(G,{children:[e.jsx(s,{edge:"start",onClick:()=>p(!h),children:e.jsx(R,{})}),e.jsx(i,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"Day Plan Upload"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(s,{onClick:_,children:e.jsx(W,{badgeContent:j,color:"error",children:e.jsx(q,{})})}),e.jsxs(b,{anchorEl:m,open:!!m,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(n,{disabled:!0,children:e.jsxs(i,{variant:"body2",children:["You have ",j," new notifications"]})}),e.jsx(C,{}),e.jsx(n,{children:e.jsx(i,{variant:"body2",children:"Notification 1"})}),e.jsx(n,{children:e.jsx(i,{variant:"body2",children:"Notification 2"})}),e.jsx(C,{}),e.jsx(n,{onClick:O,children:e.jsx(c,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(s,{onClick:()=>document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen(),children:e.jsx(V,{})}),e.jsx(s,{onClick:S,children:e.jsx(K,{})}),e.jsxs(b,{anchorEl:f,open:!!f,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(n,{onClick:F,children:"User Profile"}),e.jsx(n,{onClick:I,children:"Logout"})]})]})]})}),e.jsxs(a,{sx:{padding:5,backgroundColor:"#f9f9f9",borderRadius:"8px",marginBottom:5},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:"bold",marginBottom:5},children:"Day Plan Upload"}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2,marginBottom:5},children:[e.jsx("input",{type:"file",accept:".xlsx",onChange:D,style:{display:"none"},id:"file-input"}),e.jsx("label",{htmlFor:"file-input",children:e.jsx(c,{variant:"contained",component:"span",sx:{backgroundColor:"#FFD900",color:"black","&:hover":{backgroundColor:"#E6C200"}},children:"Choose File"})}),e.jsx(i,{children:r?r.name:"No file chosen"}),e.jsx(a,{sx:{flexGrow:1}}),e.jsx(c,{variant:"contained",color:"primary",onClick:E,children:"Upload"})]}),e.jsx(a,{sx:{height:400,width:"100%",backgroundColor:"white",borderRadius:"8px",overflowX:"auto"},children:P?e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(i,{children:"Loading data..."})}):B?e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(i,{color:"error",children:"Error loading data"})}):e.jsx(Q,{rows:A||[],columns:M,pageSizeOptions:[5,10,20]})})]})]})]})};export{ue as default};
