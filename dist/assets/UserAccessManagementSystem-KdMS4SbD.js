import{r as a,m as Y,o as J,p as Q,K as O,q as L,t as W,aM as Me,j as e,w as X,P as K,y as $,x as Ce,e as we,B as I,i as Se,k as Re,T as h,D as te,C as Ae,E as ae}from"./index-bN0kxz6j.js";import{A as ke,I as H,M as Pe,B as De,N as Ee,F as Fe}from"./Notifications-bIT2NjpP.js";import{M as me,B as z,A as Ne}from"./AccountCircle-OylfuR5v.js";import{F as Te}from"./Footer-DXpUb05u.js";import{M as G}from"./MenuItem-B8k7SO3N.js";import{b as Ie,S as Ge}from"./Select-M646vS5P.js";import{S as We,A as Ue}from"./Snackbar-CAQaTgAn.js";import{u as Ve,a as Be}from"./useFormControl-BR_Ve65N.js";import{F as ie,C as le}from"./FormControlLabel-BihKYMhP.js";import"./ClickAwayListener-DWHV8sfA.js";import"./SwitchBase-Vl6GFcik.js";const fe=a.createContext({});function Oe(o){return J("MuiAccordion",o)}const Z=Y("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),$e=o=>{const{classes:r,square:n,expanded:t,disabled:d,disableGutters:p}=o;return X({root:["root",!n&&"rounded",t&&"expanded",d&&"disabled",!p&&"gutters"],heading:["heading"],region:["region"]},Oe,r)},Le=W(K,{name:"MuiAccordion",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:n}=o;return[{[`& .${Z.region}`]:r.region},r.root,!n.square&&r.rounded,!n.disableGutters&&r.gutters]}})($(({theme:o})=>{const r={duration:o.transitions.duration.shortest};return{position:"relative",transition:o.transitions.create(["margin"],r),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(o.vars||o).palette.divider,transition:o.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Z.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Z.disabled}`]:{backgroundColor:(o.vars||o).palette.action.disabledBackground}}}),$(({theme:o})=>({variants:[{props:r=>!r.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(o.vars||o).shape.borderRadius,borderTopRightRadius:(o.vars||o).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(o.vars||o).shape.borderRadius,borderBottomRightRadius:(o.vars||o).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:r=>!r.disableGutters,style:{[`&.${Z.expanded}`]:{margin:"16px 0"}}}]}))),qe=W("h3",{name:"MuiAccordion",slot:"Heading",overridesResolver:(o,r)=>r.heading})({all:"unset"}),ce=a.forwardRef(function(r,n){const t=Q({props:r,name:"MuiAccordion"}),{children:d,className:p,defaultExpanded:c=!1,disabled:f=!1,disableGutters:b=!1,expanded:j,onChange:M,square:D=!1,slots:E={},slotProps:A={},TransitionComponent:g,TransitionProps:F,...U}=t,[u,v]=Ve({controlled:j,default:c,name:"Accordion",state:"expanded"}),C=a.useCallback(re=>{v(!u),M&&M(re,!u)},[u,M,v]),[w,...N]=a.Children.toArray(d),S=a.useMemo(()=>({expanded:u,disabled:f,disableGutters:b,toggle:C}),[u,f,b,C]),x={...t,square:D,disabled:f,disableGutters:b,expanded:u},R=$e(x),m={transition:g,...E},y={transition:F,...A},k={slots:m,slotProps:y},[P,_]=O("root",{elementType:Le,externalForwardedProps:{...k,...U},className:L(R.root,p),shouldForwardComponentProp:!0,ownerState:x,ref:n,additionalProps:{square:D}}),[ee,oe]=O("heading",{elementType:qe,externalForwardedProps:k,className:R.heading,ownerState:x}),[q,se]=O("transition",{elementType:Me,externalForwardedProps:k,ownerState:x});return e.jsxs(P,{..._,children:[e.jsx(ee,{...oe,children:e.jsx(fe.Provider,{value:S,children:w})}),e.jsx(q,{in:u,timeout:"auto",...se,children:e.jsx("div",{"aria-labelledby":w.props.id,id:w.props["aria-controls"],role:"region",className:R.region,children:N})})]})});function He(o){return J("MuiAccordionDetails",o)}Y("MuiAccordionDetails",["root"]);const ze=o=>{const{classes:r}=o;return X({root:["root"]},He,r)},Ze=W("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(o,r)=>r.root})($(({theme:o})=>({padding:o.spacing(1,2,2)}))),de=a.forwardRef(function(r,n){const t=Q({props:r,name:"MuiAccordionDetails"}),{className:d,...p}=t,c=t,f=ze(c);return e.jsx(Ze,{className:L(f.root,d),ref:n,ownerState:c,...p})});function Ke(o){return J("MuiAccordionSummary",o)}const B=Y("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Ye=o=>{const{classes:r,expanded:n,disabled:t,disableGutters:d}=o;return X({root:["root",n&&"expanded",t&&"disabled",!d&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!d&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},Ke,r)},Je=W(Ce,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(o,r)=>r.root})($(({theme:o})=>{const r={duration:o.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:o.spacing(0,2),transition:o.transitions.create(["min-height","background-color"],r),[`&.${B.focusVisible}`]:{backgroundColor:(o.vars||o).palette.action.focus},[`&.${B.disabled}`]:{opacity:(o.vars||o).palette.action.disabledOpacity},[`&:hover:not(.${B.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${B.expanded}`]:{minHeight:64}}}]}})),Qe=W("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(o,r)=>r.content})($(({theme:o})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:r=>!r.disableGutters,style:{transition:o.transitions.create(["margin"],{duration:o.transitions.duration.shortest}),[`&.${B.expanded}`]:{margin:"20px 0"}}}]}))),Xe=W("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(o,r)=>r.expandIconWrapper})($(({theme:o})=>({display:"flex",color:(o.vars||o).palette.action.active,transform:"rotate(0deg)",transition:o.transitions.create("transform",{duration:o.transitions.duration.shortest}),[`&.${B.expanded}`]:{transform:"rotate(180deg)"}}))),pe=a.forwardRef(function(r,n){const t=Q({props:r,name:"MuiAccordionSummary"}),{children:d,className:p,expandIcon:c,focusVisibleClassName:f,onClick:b,slots:j,slotProps:M,...D}=t,{disabled:E=!1,disableGutters:A,expanded:g,toggle:F}=a.useContext(fe),U=y=>{F&&F(y),b&&b(y)},u={...t,expanded:g,disabled:E,disableGutters:A},v=Ye(u),C={slots:j,slotProps:M},[w,N]=O("root",{ref:n,shouldForwardComponentProp:!0,className:L(v.root,p),elementType:Je,externalForwardedProps:{...C,...D},ownerState:u,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:E,"aria-expanded":g,focusVisibleClassName:L(v.focusVisible,f)},getSlotProps:y=>({...y,onClick:k=>{var P;(P=y.onClick)==null||P.call(y,k),U(k)}})}),[S,x]=O("content",{className:v.content,elementType:Qe,externalForwardedProps:C,ownerState:u}),[R,m]=O("expandIconWrapper",{className:v.expandIconWrapper,elementType:Xe,externalForwardedProps:C,ownerState:u});return e.jsxs(w,{...N,children:[e.jsx(S,{...x,children:d}),c&&e.jsx(R,{...m,children:c})]})});function _e(o){return J("MuiFormGroup",o)}Y("MuiFormGroup",["root","row","error"]);const eo=o=>{const{classes:r,row:n,error:t}=o;return X({root:["root",n&&"row",t&&"error"]},_e,r)},oo=W("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:n}=o;return[r.root,n.row&&r.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),ue=a.forwardRef(function(r,n){const t=Q({props:r,name:"MuiFormGroup"}),{className:d,row:p=!1,...c}=t,f=Be(),b=Ie({props:t,muiFormControl:f,states:["error"]}),j={...t,row:p,error:b.error},M=eo(j);return e.jsx(oo,{className:L(M.root,d),ownerState:j,ref:n,...c})}),V=[{name:"Admin",description:"Full system access",type:"admin",permissions:{adminDashboard:!0,userManagement:!0,roleManagement:!0,systemSettings:!0,auditLogs:!0,backupRestore:!0,apiManagement:!0,reportGeneration:!0,dataExport:!0,systemMonitoring:!0,managerDashboard:!1,workOrderManagement:!1,teamManagement:!1,performanceReports:!1,inventoryView:!1,maintenanceScheduling:!1,costAnalysis:!1,kpiMonitoring:!1,documentManagement:!1,approvalWorkflows:!1,supplierDashboard:!1,partsCatalog:!1,orderManagement:!1,deliveryTracking:!1,invoiceSubmission:!1,inventoryManagement:!1,contractView:!1,serviceRequests:!1,complianceDocuments:!1,performanceMetrics:!1}},{name:"Manager",description:"Team management access",type:"manager",permissions:{adminDashboard:!1,userManagement:!1,roleManagement:!1,systemSettings:!1,auditLogs:!1,backupRestore:!1,apiManagement:!1,reportGeneration:!1,dataExport:!1,systemMonitoring:!1,managerDashboard:!0,workOrderManagement:!0,teamManagement:!0,performanceReports:!0,inventoryView:!0,maintenanceScheduling:!0,costAnalysis:!0,kpiMonitoring:!0,documentManagement:!0,approvalWorkflows:!0,supplierDashboard:!1,partsCatalog:!1,orderManagement:!1,deliveryTracking:!1,invoiceSubmission:!1,inventoryManagement:!1,contractView:!1,serviceRequests:!1,complianceDocuments:!1,performanceMetrics:!1}},{name:"Supplier",description:"Vendor access",type:"supplier",permissions:{adminDashboard:!1,userManagement:!1,roleManagement:!1,systemSettings:!1,auditLogs:!1,backupRestore:!1,apiManagement:!1,reportGeneration:!1,dataExport:!1,systemMonitoring:!1,managerDashboard:!1,workOrderManagement:!1,teamManagement:!1,performanceReports:!1,inventoryView:!1,maintenanceScheduling:!1,costAnalysis:!1,kpiMonitoring:!1,documentManagement:!1,approvalWorkflows:!1,supplierDashboard:!0,partsCatalog:!0,orderManagement:!0,deliveryTracking:!0,invoiceSubmission:!0,inventoryManagement:!0,contractView:!0,serviceRequests:!0,complianceDocuments:!0,performanceMetrics:!0}}],fo=()=>{const[o,r]=a.useState(V),[n,t]=a.useState("Admin"),[d,p]=a.useState("Full system access"),[c,f]=a.useState("admin"),[b,j]=a.useState(!1),[M,D]=a.useState(!1),[,E]=a.useState(!1),[A,g]=a.useState(!1),[F,U]=a.useState(null),[u,v]=a.useState(null),[C]=a.useState(3),w=we(),[N,S]=a.useState(V[0].permissions),[x,R]=a.useState({open:!1,message:"",severity:"success"});a.useEffect(()=>{(async()=>{try{g(!0)}catch(i){console.error("Error fetching roles:",i),m("Failed to fetch roles","error"),r(V)}finally{g(!1)}})()},[]);const m=(s,i)=>{R({open:!0,message:s,severity:i})},y=()=>{document.fullscreenElement?document.exitFullscreen().then(()=>E(!1)).catch(s=>{console.error("Error attempting to exit fullscreen:",s),m("Failed to exit fullscreen","error")}):document.documentElement.requestFullscreen().then(()=>E(!0)).catch(s=>{console.error("Error attempting to enable fullscreen:",s),m("Failed to enter fullscreen","error")})},k=s=>{U(s.currentTarget)},P=()=>{U(null)},_=()=>{w("/userProfile"),P()},ee=()=>{w("/login"),P()},oe=s=>{v(s.currentTarget)},q=()=>{v(null)},se=()=>{w("/notifications"),q()},re=s=>{const i=s.target.value;t(i);const l=o.find(T=>T.name===i);l&&(p(l.description),f(l.type),S(l.permissions))},ne=s=>i=>{S(l=>({...l,[s]:i.target.checked}))},ge=async()=>{try{g(!0),m("Permissions updated successfully!","success")}catch(s){console.error("Error updating permissions:",s),m("Failed to update permissions","error")}finally{g(!1)}},xe=async()=>{var i;const s=prompt("Enter new role name:");if(s){const l=prompt("Enter role type (admin, manager, or supplier):");if(l==="admin"||l==="manager"||l==="supplier")try{g(!0);const T={name:s,type:l,description:"",permissions:((i=V.find(je=>je.type===l))==null?void 0:i.permissions)||V[0].permissions};r([...o,T]),t(s),p(T.description),f(l),S(T.permissions),m("New role added successfully!","success")}catch(T){console.error("Error adding role:",T),m("Failed to add new role","error")}finally{g(!1)}else m("Invalid role type. Must be admin, manager, or supplier","error")}},he=async()=>{if(window.confirm("Are you sure you want to delete this role?"))try{g(!0);const s=o.filter(i=>i.name!==n);r(s),s.length>0?(t(s[0].name),p(s[0].description),f(s[0].type),S(s[0].permissions)):(t(""),p(""),S(V[0].permissions)),m("Role deleted successfully!","success")}catch(s){console.error("Error deleting role:",s),m("Failed to delete role","error")}finally{g(!1)}},be=()=>e.jsxs(ce,{defaultExpanded:c==="admin",children:[e.jsx(pe,{expandIcon:e.jsx(ae,{}),children:e.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:"Admin Permissions"})}),e.jsx(de,{children:e.jsx(ue,{children:Object.entries(N).filter(([s])=>s.includes("admin")||["userManagement","roleManagement","systemSettings","auditLogs","backupRestore","apiManagement","reportGeneration","dataExport","systemMonitoring"].includes(s)).map(([s,i])=>e.jsx(ie,{control:e.jsx(le,{checked:i,onChange:ne(s)}),label:s.replace(/([A-Z])/g," $1").replace(/^./,l=>l.toUpperCase())},s))})})]}),ye=()=>e.jsxs(ce,{defaultExpanded:c==="manager",children:[e.jsx(pe,{expandIcon:e.jsx(ae,{}),children:e.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:"Manager Permissions"})}),e.jsx(de,{children:e.jsx(ue,{children:Object.entries(N).filter(([s])=>s.includes("manager")||["workOrderManagement","teamManagement","performanceReports","inventoryView","maintenanceScheduling","costAnalysis","kpiMonitoring","documentManagement","approvalWorkflows"].includes(s)).map(([s,i])=>e.jsx(ie,{control:e.jsx(le,{checked:i,onChange:ne(s)}),label:s.replace(/([A-Z])/g," $1").replace(/^./,l=>l.toUpperCase())},s))})})]}),ve=()=>e.jsxs(ce,{defaultExpanded:c==="supplier",children:[e.jsx(pe,{expandIcon:e.jsx(ae,{}),children:e.jsx(h,{variant:"h6",sx:{fontWeight:"bold"},children:"Supplier Permissions"})}),e.jsx(de,{children:e.jsx(ue,{children:Object.entries(N).filter(([s])=>s.includes("supplier")||["partsCatalog","orderManagement","deliveryTracking","invoiceSubmission","inventoryManagement","contractView","serviceRequests","complianceDocuments","performanceMetrics"].includes(s)).map(([s,i])=>e.jsx(ie,{control:e.jsx(le,{checked:i,onChange:ne(s)}),label:s.replace(/([A-Z])/g," $1").replace(/^./,l=>l.toUpperCase())},s))})})]});return e.jsxs(I,{sx:{display:"flex",flexDirection:"column",width:"95vw",height:"100vh",minHeight:"100vh"},children:[e.jsx(Se,{open:b||M,setOpen:j,onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1)}),e.jsxs(I,{sx:{flexGrow:1,bgcolor:"#f5f5f5"},children:[e.jsx(ke,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(Re,{children:[e.jsx(H,{edge:"start",color:"inherit",onClick:()=>j(!b),children:e.jsx(Pe,{sx:{color:"black"}})}),e.jsx(h,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"Day Plan Report"}),e.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(H,{onClick:oe,children:e.jsx(De,{badgeContent:C,color:"error",children:e.jsx(Ee,{})})}),e.jsxs(me,{anchorEl:u,open:!!u,onClose:q,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(G,{disabled:!0,children:e.jsxs(h,{variant:"body2",children:["You have ",C," new notifications"]})}),e.jsx(te,{}),e.jsx(G,{children:e.jsx(h,{variant:"body2",children:"Notification 1"})}),e.jsx(G,{children:e.jsx(h,{variant:"body2",children:"Notification 2"})}),e.jsx(te,{}),e.jsx(G,{onClick:se,children:e.jsx(z,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(H,{onClick:y,children:e.jsx(Fe,{})}),e.jsx(H,{onClick:k,children:e.jsx(Ne,{})}),e.jsxs(me,{anchorEl:F,open:!!F,onClose:P,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(G,{onClick:_,children:"User Profile"}),e.jsx(G,{onClick:ee,children:"Logout"})]})]})]})}),e.jsxs(I,{sx:{p:3},children:[e.jsxs(K,{elevation:3,sx:{p:3,mb:3},children:[e.jsxs(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",width:"100%"},children:[e.jsx(h,{children:"User Role:"}),e.jsx(Ge,{value:n,onChange:re,sx:{minWidth:200},displayEmpty:!0,children:o.map(s=>e.jsx(G,{value:s.name,children:s.name},s.name))}),e.jsxs(I,{sx:{display:"flex",gap:2,marginLeft:"auto"},children:[e.jsx(z,{variant:"contained",color:"primary",onClick:ge,disabled:!n||A,sx:{minWidth:100},children:A?e.jsx(Ae,{size:24}):"Update"}),e.jsx(z,{variant:"contained",color:"secondary",onClick:xe,disabled:A,sx:{minWidth:100},children:"New"}),e.jsx(z,{variant:"contained",color:"error",onClick:he,disabled:!n||A,sx:{minWidth:100},children:"Delete"})]})]}),n&&e.jsxs(I,{sx:{mt:2},children:[e.jsxs(h,{variant:"subtitle1",children:[e.jsx("strong",{children:"Role Type:"})," ",c.charAt(0).toUpperCase()+c.slice(1)]}),e.jsxs(h,{variant:"subtitle1",children:[e.jsx("strong",{children:"Description:"})," ",d||"No description available"]})]})]}),n?e.jsxs(K,{elevation:3,sx:{p:3},children:[e.jsx(h,{variant:"h5",sx:{mb:2},children:"Role Permissions"}),e.jsx(te,{sx:{mb:3}}),be(),ye(),ve()]}):e.jsx(K,{elevation:3,sx:{p:3,textAlign:"center"},children:e.jsx(h,{variant:"h6",children:"Please select a role to view or edit permissions"})})]})]}),e.jsx(We,{open:x.open,autoHideDuration:6e3,onClose:()=>R({...x,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(Ue,{onClose:()=>R({...x,open:!1}),severity:x.severity,sx:{width:"100%"},children:x.message})}),e.jsx(Te,{})]})};export{fo as default};
