import{c as te,j as e,r as s,e as re,B as n,i as se,k as oe,T as r,D as Y,Z as T,C as ne}from"./index-CLjSK6S6.js";import{A as L,D as B,F as ae,P as ie,a as C}from"./AdapterDayjs-VTP0olP6.js";import{A as le,I as y,M as ce,B as de,N as he,F as xe}from"./Notifications-gU08fzS7.js";import{M as O,B as l,A as me}from"./AccountCircle-5jn0rp7x.js";import{a as v}from"./index-t--hEgTQ.js";import{F as pe}from"./Footer-DiwPU8Fx.js";import{M as c}from"./MenuItem-c_6Y_tlY.js";import{G as a}from"./Grid-BrNXE-HX.js";import{C as d}from"./Card-DDu2XzJT.js";import{C as h}from"./CardContent-LtRkY6RS.js";import{S as fe}from"./Stack-B0JblR4S.js";import{S as ue,A as je}from"./Snackbar-Deu9xmKx.js";import{D as ge}from"./DataGrid-CXSAv4bg.js";import"./useFormControl-C3t4IaDR.js";import"./InputLabel-l34_Zl7i.js";import"./Select-DWO1cG26.js";import"./isMuiElement-DuhCa2c8.js";import"./TextField-BS6A6mKm.js";import"./InputAdornment-SUBugrxU.js";import"./DialogContent-DE6g5QZV.js";import"./ListItem-9kgsMgc6.js";import"./styled-D5Wz6DMV.js";import"./ClickAwayListener-Dh7wAXjO.js";import"./FormControlLabel-DTVFhN_-.js";import"./SwitchBase-CgmHd4ul.js";import"./TableCell-CtEhFfNa.js";const p=te(e.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),ye=[{field:"id",headerName:"ID",width:80},{field:"serverDateTime",headerName:"Server Date Time",width:180},{field:"lineNo",headerName:"Line No",width:100},{field:"buyer",headerName:"Buyer",width:120},{field:"style",headerName:"Style",width:120},{field:"color",headerName:"Color",width:100},{field:"size",headerName:"Size",width:80},{field:"success",headerName:"Success",width:100,type:"number"},{field:"rework",headerName:"Rework",width:100,type:"number"},{field:"defect",headerName:"Defect",width:100,type:"number"}],We=()=>{const[f,G]=s.useState(null),[u,V]=s.useState(null),[H,S]=s.useState([]),[E,M]=s.useState(!1),[_,I]=s.useState(!1),[k,N]=s.useState(null),[P,F]=s.useState(null),[z]=s.useState(3),[j,g]=s.useState(!1),[x,b]=s.useState({open:!1,message:"",severity:"success"}),D=re(),[U,W]=s.useState({pageSize:10,page:0}),[o,A]=s.useState({performanceEfi:0,lineEfi:0,totalSuccess:0,totalRework:0,totalDefect:0,topDefects:[]});s.useEffect(()=>{q()},[]);const q=async()=>{try{g(!0);const[t,i]=await Promise.all([v.get("http://localhost:8000/api/day-plans"),v.get("http://localhost:8000/api/performance-metrics")]);S(t.data),A(i.data),m("Data loaded successfully","success")}catch(t){console.error("Error fetching initial data:",t),m("Failed to load initial data","error")}finally{g(!1)}},Z=()=>{document.fullscreenElement?document.exitFullscreen().catch(t=>console.error("Error attempting to exit fullscreen:",t)):document.documentElement.requestFullscreen().catch(t=>console.error("Error attempting to enable fullscreen:",t))},m=(t,i)=>{b({open:!0,message:t,severity:i})},J=t=>{N(t.currentTarget)},w=()=>{N(null)},K=()=>{D("/userProfile"),w()},Q=()=>{D("/login"),w()},X=t=>{F(t.currentTarget)},R=()=>{F(null)},$=()=>{D("/notifications"),R()},ee=async()=>{if(!f||!u){m("Please select both start and end dates.","error");return}try{g(!0);const[t,i]=await Promise.all([v.get("http://localhost:8000/api/dayplan-reports",{params:{start_date:f.format("YYYY-MM-DD"),end_date:u.format("YYYY-MM-DD")}}),v.get("http://localhost:8000/api/performance-metrics",{params:{start_date:f.format("YYYY-MM-DD"),end_date:u.format("YYYY-MM-DD")}})]);S(t.data),A(i.data),m("Reports fetched successfully","success")}catch(t){console.error("Error fetching reports:",t),m("Failed to fetch reports","error")}finally{g(!1)}};return e.jsxs(n,{sx:{display:"full",width:"95vw",height:"100vh",minHeight:"100vh",backgroundColor:"#f5f5f5"},children:[e.jsx(se,{open:E||_,setOpen:M,onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1)}),e.jsxs(n,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(le,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(oe,{children:[e.jsx(y,{edge:"start",color:"inherit",onClick:()=>M(!E),children:e.jsx(ce,{sx:{color:"black"}})}),e.jsx(r,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"Day Plan Report"}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(y,{onClick:X,children:e.jsx(de,{badgeContent:z,color:"error",children:e.jsx(he,{})})}),e.jsxs(O,{anchorEl:P,open:!!P,onClose:R,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(c,{disabled:!0,children:e.jsxs(r,{variant:"body2",children:["You have ",z," new notifications"]})}),e.jsx(Y,{}),e.jsx(c,{children:e.jsx(r,{variant:"body2",children:"Notification 1"})}),e.jsx(c,{children:e.jsx(r,{variant:"body2",children:"Notification 2"})}),e.jsx(Y,{}),e.jsx(c,{onClick:$,children:e.jsx(l,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(y,{onClick:Z,children:e.jsx(xe,{})}),e.jsx(y,{onClick:J,children:e.jsx(me,{})}),e.jsxs(O,{anchorEl:k,open:!!k,onClose:w,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(c,{onClick:K,children:"User Profile"}),e.jsx(c,{onClick:Q,children:"Logout"})]})]})]})}),e.jsxs(n,{sx:{p:3,flexGrow:1,overflow:"auto"},children:[e.jsx(r,{variant:"h6",sx:{mb:2},children:"Details"}),e.jsxs(a,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(a,{item:!0,xs:12,sm:6,md:4,lg:2,children:e.jsx(d,{sx:{height:"100%"},children:e.jsxs(h,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Performance EFI"}),e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsxs(r,{variant:"h5",component:"div",children:[o.performanceEfi.toFixed(2),"%"]}),e.jsx(p,{color:o.performanceEfi>0?"success":"error",sx:{ml:1}})]}),e.jsx(r,{variant:"caption",color:"text.secondary",children:o.performanceEfi>0?"More than yesterday":"Less than yesterday"})]})})}),e.jsx(a,{item:!0,xs:12,sm:6,md:4,lg:2,children:e.jsx(d,{sx:{height:"100%"},children:e.jsxs(h,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"LINE EFI"}),e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsxs(r,{variant:"h5",component:"div",children:[o.lineEfi.toFixed(2),"%"]}),e.jsx(p,{color:o.lineEfi>0?"success":"error",sx:{ml:1}})]}),e.jsx(r,{variant:"caption",color:"text.secondary",children:o.lineEfi>0?"More than yesterday":"Less than yesterday"})]})})}),e.jsx(a,{item:!0,xs:12,sm:6,md:4,lg:2,children:e.jsx(d,{sx:{height:"100%"},children:e.jsxs(h,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Total Success"}),e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(r,{variant:"h5",component:"div",children:o.totalSuccess}),e.jsx(p,{color:"success",sx:{ml:1}})]}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"More than yesterday"})]})})}),e.jsx(a,{item:!0,xs:12,sm:6,md:4,lg:2,children:e.jsx(d,{sx:{height:"100%"},children:e.jsxs(h,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Total Rework"}),e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(r,{variant:"h5",component:"div",children:o.totalRework}),e.jsx(p,{color:"error",sx:{ml:1}})]}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"More than yesterday"})]})})}),e.jsx(a,{item:!0,xs:12,sm:6,md:4,lg:2,children:e.jsx(d,{sx:{height:"100%"},children:e.jsxs(h,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"Total Defect"}),e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(r,{variant:"h5",component:"div",children:o.totalDefect}),e.jsx(p,{color:"error",sx:{ml:1}})]}),e.jsx(r,{variant:"caption",color:"text.secondary",children:"More than yesterday"})]})})}),e.jsx(a,{item:!0,xs:12,sm:6,md:4,lg:2,children:e.jsx(d,{sx:{height:"100%"},children:e.jsxs(h,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",children:"TOP 3 DEFECTS"}),e.jsx(r,{variant:"h5",component:"div",children:o.topDefects.length}),e.jsx(r,{variant:"caption",color:"text.secondary",children:o.topDefects.map((t,i)=>e.jsxs("div",{children:[i+1,". ",t]},i))})]})})})]}),e.jsx(n,{sx:{backgroundColor:"#ffffff",padding:2,borderRadius:1,mb:3,boxShadow:1},children:e.jsxs(a,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(a,{item:!0,xs:12,sm:4,children:e.jsx(T,{dateAdapter:L,children:e.jsx(B,{label:"Start Date",value:f,onChange:t=>G(t),slotProps:{textField:{variant:"outlined",fullWidth:!0,size:"small"}}})})}),e.jsx(a,{item:!0,xs:12,sm:4,children:e.jsx(T,{dateAdapter:L,children:e.jsx(B,{label:"End Date",value:u,onChange:t=>V(t),slotProps:{textField:{variant:"outlined",fullWidth:!0,size:"small"}}})})}),e.jsx(a,{item:!0,xs:12,sm:4,sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(l,{variant:"contained",color:"primary",onClick:ee,sx:{height:"40px"},disabled:j,startIcon:j?e.jsx(ne,{size:20,color:"inherit"}):null,children:j?"Loading...":"View Reports"})})]})}),e.jsxs(fe,{direction:"row",spacing:1,justifyContent:"flex-end",sx:{mb:1},children:[e.jsx(l,{startIcon:e.jsx(ae,{}),size:"small",children:"Copy"}),e.jsx(l,{startIcon:e.jsx(ie,{}),size:"small",children:"Print"}),e.jsx(l,{startIcon:e.jsx(C,{}),size:"small",children:"Excel"}),e.jsx(l,{startIcon:e.jsx(C,{}),size:"small",children:"CSV"}),e.jsx(l,{startIcon:e.jsx(C,{}),size:"small",children:"PDF"})]}),e.jsx(n,{sx:{height:500,backgroundColor:"#fff",p:2,borderRadius:1,boxShadow:1},children:e.jsx(ge,{rows:H,columns:ye,paginationModel:U,onPaginationModelChange:W,pageSizeOptions:[5,10,25],checkboxSelection:!0,loading:j})})]}),e.jsx(pe,{})]}),e.jsx(ue,{open:x.open,autoHideDuration:6e3,onClose:()=>b({...x,open:!1}),children:e.jsx(je,{onClose:()=>b({...x,open:!1}),severity:x.severity,sx:{width:"100%"},children:x.message})})]})};export{We as default};
