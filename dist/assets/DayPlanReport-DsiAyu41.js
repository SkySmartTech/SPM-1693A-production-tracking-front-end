import{r as o,e as Z,j as e,B as s,i as J,k as K,T as l,D as M,Z as Q,C as X}from"./index-CLjSK6S6.js";import{A as $,D as I,F as ee,P as te,a as j}from"./AdapterDayjs-VTP0olP6.js";import{A as oe,I as d,M as re,B as se,N as ae,F as ne}from"./Notifications-gU08fzS7.js";import{M as P,B as r,A as ie}from"./AccountCircle-5jn0rp7x.js";import{a as z}from"./index-t--hEgTQ.js";import{F as le}from"./Footer-DiwPU8Fx.js";import{M as a}from"./MenuItem-c_6Y_tlY.js";import{S as g}from"./Stack-B0JblR4S.js";import{S as ce,A as de}from"./Snackbar-Deu9xmKx.js";import{D as he}from"./DataGrid-CXSAv4bg.js";import"./useFormControl-C3t4IaDR.js";import"./InputLabel-l34_Zl7i.js";import"./Select-DWO1cG26.js";import"./isMuiElement-DuhCa2c8.js";import"./TextField-BS6A6mKm.js";import"./InputAdornment-SUBugrxU.js";import"./DialogContent-DE6g5QZV.js";import"./ListItem-9kgsMgc6.js";import"./styled-D5Wz6DMV.js";import"./ClickAwayListener-Dh7wAXjO.js";import"./FormControlLabel-DTVFhN_-.js";import"./SwitchBase-CgmHd4ul.js";import"./TableCell-CtEhFfNa.js";const ue=[{field:"id",headerName:"ID",width:80},{field:"serverDateTime",headerName:"Server Date Time",width:150},{field:"lineNo",headerName:"Line No",width:120},{field:"buyer",headerName:"Buyer",width:150},{field:"style",headerName:"Style",width:120},{field:"color",headerName:"Color",width:100},{field:"size",headerName:"Size",width:90},{field:"success",headerName:"Success",width:100,type:"number"},{field:"rework",headerName:"Rework",width:120,type:"number"},{field:"defect",headerName:"Defect",width:130,type:"number"}],Re=()=>{const[h,A]=o.useState(null),[u,F]=o.useState(null),[B,b]=o.useState([]),[D,w]=o.useState(!1),[R,y]=o.useState(!1),[C,v]=o.useState(null),[S,k]=o.useState(null),[N]=o.useState(3),[x,c]=o.useState(!1),[n,p]=o.useState({open:!1,message:"",severity:"success"}),f=Z(),[O,Y]=o.useState({pageSize:10,page:0});o.useEffect(()=>{T()},[]);const T=async()=>{try{c(!0);const t=await z.get("http://localhost:8000/api/day-plans");b(t.data),i("Data loaded successfully","success")}catch(t){console.error("Error fetching data:",t),i("Failed to load data","error")}finally{c(!1)}},L=()=>{document.fullscreenElement?document.exitFullscreen().catch(t=>console.error("Error attempting to exit fullscreen:",t)):document.documentElement.requestFullscreen().catch(t=>console.error("Error attempting to enable fullscreen:",t))},i=(t,U)=>{p({open:!0,message:t,severity:U})},G=t=>{v(t.currentTarget)},m=()=>{v(null)},H=()=>{f("/userProfile"),m()},V=()=>{f("/login"),m()},W=t=>{k(t.currentTarget)},E=()=>{k(null)},_=()=>{f("/notifications"),E()},q=async()=>{if(!h||!u){i("Please select both start and end dates.","error");return}try{c(!0);const t=await z.get("http://localhost:8000/api/dayplan-reports",{params:{start_date:h.format("YYYY-MM-DD"),end_date:u.format("YYYY-MM-DD")}});b(t.data),i("Reports fetched successfully","success")}catch(t){console.error("Error fetching reports:",t),i("Failed to fetch reports","error")}finally{c(!1)}};return e.jsxs(s,{sx:{display:"full",width:"95vw",height:"100vh",minHeight:"100vh",backgroundColor:"#D8DBDE"},children:[e.jsx(J,{open:D||R,setOpen:w,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)}),e.jsxs(s,{sx:{flexGrow:1,bgcolor:"#D8DBDE"},children:[e.jsx(oe,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(K,{children:[e.jsx(d,{edge:"start",color:"inherit",onClick:()=>w(!D),children:e.jsx(re,{sx:{color:"black"}})}),e.jsx(l,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"Day Plan Report"}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(d,{onClick:W,children:e.jsx(se,{badgeContent:N,color:"error",children:e.jsx(ae,{})})}),e.jsxs(P,{anchorEl:S,open:!!S,onClose:E,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(a,{disabled:!0,children:e.jsxs(l,{variant:"body2",children:["You have ",N," new notifications"]})}),e.jsx(M,{}),e.jsx(a,{children:e.jsx(l,{variant:"body2",children:"Notification 1"})}),e.jsx(a,{children:e.jsx(l,{variant:"body2",children:"Notification 2"})}),e.jsx(M,{}),e.jsx(a,{onClick:_,children:e.jsx(r,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(d,{onClick:L,children:e.jsx(ne,{})}),e.jsx(d,{onClick:G,children:e.jsx(ie,{})}),e.jsxs(P,{anchorEl:C,open:!!C,onClose:m,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(a,{onClick:H,children:"User Profile"}),e.jsx(a,{onClick:V,children:"Logout"})]})]})]})}),e.jsxs(s,{sx:{backgroundColor:"#D8DBDE",p:2,borderRadius:1},children:[e.jsx(l,{variant:"h6",sx:{mb:2},children:"Details"}),e.jsxs(g,{direction:"row",spacing:2,sx:{backgroundColor:"#fff",padding:2,borderRadius:3,mb:3,alignItems:"center"},children:[e.jsx(g,{direction:"row",spacing:2,sx:{flexGrow:1},children:e.jsxs(Q,{dateAdapter:$,children:[e.jsx(I,{label:"Start Date",value:h,sx:{width:"300px"},onChange:t=>A(t),slotProps:{textField:{variant:"outlined",fullWidth:!0}}}),e.jsx(I,{label:"End Date",value:u,sx:{width:"300px"},onChange:t=>F(t),slotProps:{textField:{variant:"outlined",fullWidth:!0}}})]})}),e.jsx(s,{children:e.jsx(r,{variant:"contained",color:"primary",onClick:q,sx:{ml:"auto",height:"50px"},disabled:x,children:x?e.jsx(X,{size:24}):"View Reports"})})]}),e.jsxs(s,{sx:{height:500,backgroundColor:"#fff",p:2,borderRadius:3},children:[e.jsxs(g,{direction:"row",spacing:.8,justifyContent:"flex-end",sx:{mb:.5},children:[e.jsx(r,{startIcon:e.jsx(ee,{}),size:"small",children:"Copy"}),e.jsx(r,{startIcon:e.jsx(te,{}),size:"small",children:"Print"}),e.jsx(r,{startIcon:e.jsx(j,{}),size:"small",children:"Excel"}),e.jsx(r,{startIcon:e.jsx(j,{}),size:"small",children:"CSV"}),e.jsx(r,{startIcon:e.jsx(j,{}),size:"small",children:"PDF"})]}),e.jsx(he,{rows:B,columns:ue,paginationModel:O,onPaginationModelChange:Y,pageSizeOptions:[5,10,25],checkboxSelection:!0,loading:x})]})]})]}),e.jsx(le,{}),e.jsx(ce,{open:n.open,autoHideDuration:6e3,onClose:()=>p({...n,open:!1}),children:e.jsx(de,{onClose:()=>p({...n,open:!1}),severity:n.severity,sx:{width:"100%"},children:n.message})})]})};export{Re as default};
