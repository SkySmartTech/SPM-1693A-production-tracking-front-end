import{c as F,j as e,r as a,e as je,B as i,f as ge,i as be,k as Ce,T as c,D as M,C as P,A as ve,E as we,m as w}from"./index-DbvNdllW.js";import{F as ye}from"./Footer-Bc1dpBWo.js";import{A as ke,I as R,M as De,B as Se,N as Oe,F as Ee}from"./Notifications-j6OMPz9m.js";import{M as Q,B as O,A as Ae}from"./AccountCircle-BqrC-WHa.js";import{M as l}from"./MenuItem-BE8l7ryc.js";import{C as Pe}from"./Card-DQiV8G8E.js";import{G as x}from"./Grid-B2YnSNSE.js";import{F as p,I as m}from"./InputLabel-BJ-Hgfal.js";import{S as f}from"./Select-1bWPsc-P.js";import{D as Re}from"./Delete-C8yZ2-gg.js";import{D as X,a as ee,b as te}from"./DialogContent-Zf1qvqUe.js";import{D as oe}from"./DialogTitle-BT1E2PJj.js";import{S as ze,A as Ie}from"./Snackbar-sTGnc7Nj.js";import"./useFormControl-DDGvswHg.js";import"./isMuiElement-qTM6GdlR.js";import"./ClickAwayListener-Ba4dolDx.js";const se=F(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m-2 14-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"AssignmentTurnedIn"),ne=F(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),ae=F(e.jsx("path",{d:"m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61m19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6M7.88 8.75c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-2 11c0 1.1.9 2 2 2h1.45l-3.45-8.34z"}),"Style"),E={buyer:"N/A",gg:"0",smv:"0",presentCarder:"0",reworkCount:0,successCount:0,defectCount:0,hourlyData:[0,0,0,0,0,0,0,0]},Ze=()=>{const[h,A]=a.useState(E),[y,re]=a.useState({teams:[],styles:[],colors:[],sizes:[],checkPoints:[]}),[j,ie]=a.useState({parts:[],locations:[],defectCodes:[]}),[n,d]=a.useState({data:!1,options:!0,submit:!1,defectReworkOptions:!1}),[N,L]=a.useState(!1),[le,T]=a.useState(!1),[W,$]=a.useState(null),[G,H]=a.useState(null),[U]=a.useState(3),z=je(),[u,V]=a.useState({teamNo:"",style:"",color:"",size:"",checkPoint:""}),[k,I]=a.useState({open:!1,message:"",severity:"success"}),[Y,_]=a.useState({rework:!1,defect:!1}),[r,q]=a.useState({part:"",location:"",defectCode:""}),g="http://localhost:8000/api";a.useEffect(()=>{(async()=>{try{const o=await w.get(`${g}/production-options`),s={teams:o.data.teams||[],styles:o.data.styles||[],colors:o.data.colors||[],sizes:o.data.sizes||[],checkPoints:o.data.checkPoints||[]};re(s),s.teams.length>0&&V({teamNo:s.teams[0],style:s.styles[0]||"",color:s.colors[0]||"",size:s.sizes[0]||"",checkPoint:s.checkPoints[0]||""})}catch(o){console.error("Error fetching dropdown options:",o),C("Failed to load dropdown options","error")}finally{d(o=>({...o,options:!1}))}})()},[]),a.useEffect(()=>{(async()=>{try{d(s=>({...s,defectReworkOptions:!0}));const o=await w.get(`${g}/defect-rework-options`);ie({parts:o.data.parts||[],locations:o.data.locations||[],defectCodes:o.data.defectCodes||[]})}catch(o){console.error("Error fetching defect/rework options:",o),C("Failed to load defect/rework options","error")}finally{d(o=>({...o,defectReworkOptions:!1}))}})()},[]),a.useEffect(()=>{(async()=>{if(u.teamNo)try{d(s=>({...s,data:!0}));const o=await w.get(`${g}/production-data`,{params:u});A(o.data||E)}catch(o){console.error("Error fetching production data:",o),C("Failed to load production data","error"),A(E)}finally{d(o=>({...o,data:!1}))}})()},[u]);const ce=async t=>{const{name:o,value:s}=t.target,v={...u,[o]:s};V(v);try{d(fe=>({...fe,submit:!0}));const S=await w.get(`${g}/production-data`,{params:v});A(S.data||E)}catch(S){console.error("Error updating data with new filters",S),C("Failed to update data with new filters","error")}finally{d(S=>({...S,submit:!1}))}},b=t=>{const{name:o,value:s}=t.target;q(v=>({...v,[o]:s}))},K=t=>{_(o=>({...o,[t]:!0}))},D=t=>{_(o=>({...o,[t]:!1})),q({part:"",location:"",defectCode:""})},Z=async t=>{try{d(s=>({...s,submit:!0})),await w.post(`${g}/${t}-submit`,{...r,...u}),C(`${t.charAt(0).toUpperCase()+t.slice(1)} submitted successfully`,"success"),D(t);const o=await w.get(`${g}/production-data`,{params:u});A(o.data||E)}catch(o){console.error(`Error submitting ${t}:`,o),C(`Failed to submit ${t}`,"error")}finally{d(o=>({...o,submit:!1}))}},C=(t,o)=>{I({open:!0,message:t,severity:o})},de=()=>{document.fullscreenElement?document.exitFullscreen().catch(t=>{console.error("Error attempting to exit fullscreen:",t)}):document.documentElement.requestFullscreen().catch(t=>{console.error("Error attempting to enable fullscreen:",t)})},he=t=>{$(t.currentTarget)},B=()=>{$(null)},xe=()=>{z("/userProfile"),B()},ue=()=>{z("/login"),B()},pe=t=>{H(t.currentTarget)},J=()=>{H(null)},me=()=>{z("/notifications"),J()};return e.jsxs(i,{sx:{display:"flex",width:"100vw",height:"100vh",minHeight:"100vh",backgroundColor:"#f5f5f5"},children:[e.jsx(ge,{}),e.jsx(be,{open:N||le,setOpen:L,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1)}),e.jsxs(i,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(ke,{position:"static",sx:{bgcolor:"white",boxShadow:2},children:e.jsxs(Ce,{children:[e.jsx(R,{edge:"start",color:"inherit",onClick:()=>L(!N),children:e.jsx(De,{sx:{color:"black"}})}),e.jsx(c,{variant:"h6",sx:{flexGrow:1,color:"black"},children:"Production Update"}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(R,{onClick:pe,children:e.jsx(Se,{badgeContent:U,color:"error",children:e.jsx(Oe,{})})}),e.jsxs(Q,{anchorEl:G,open:!!G,onClose:J,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{width:300,maxHeight:400}},children:[e.jsx(l,{disabled:!0,children:e.jsxs(c,{variant:"body2",children:["You have ",U," new notifications"]})}),e.jsx(M,{}),e.jsx(l,{children:e.jsx(c,{variant:"body2",children:"Notification 1"})}),e.jsx(l,{children:e.jsx(c,{variant:"body2",children:"Notification 2"})}),e.jsx(M,{}),e.jsx(l,{onClick:me,children:e.jsx(O,{fullWidth:!0,variant:"contained",size:"small",children:"View All Notifications"})})]}),e.jsx(R,{onClick:de,children:e.jsx(Ee,{})}),e.jsx(R,{onClick:he,children:e.jsx(Ae,{})}),e.jsxs(Q,{anchorEl:W,open:!!W,onClose:B,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(l,{onClick:xe,children:"User Profile"}),e.jsx(l,{onClick:ue,children:"Logout"})]})]})]})}),e.jsx(i,{sx:{p:3,flexGrow:1,overflow:"auto"},children:n.options?e.jsxs(i,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:[e.jsx(P,{size:60}),e.jsx(c,{variant:"h6",sx:{ml:2},children:"Loading dropdown options..."})]}):e.jsxs(Pe,{sx:{p:3,borderRadius:"12px",boxShadow:3},children:[e.jsx(x,{container:!0,spacing:3,sx:{mb:3},children:[{label:"BUYER",value:h.buyer,icon:e.jsx(ne,{})},{label:"GG",value:h.gg,icon:e.jsx(ae,{})},{label:"SMV",value:h.smv,icon:e.jsx(se,{})},{label:"PRESENT CARDER",value:h.presentCarder,icon:e.jsx(ne,{})}].map((t,o)=>e.jsx(x,{item:!0,xs:12,sm:3,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2,marginBottom:4},children:[e.jsx(ve,{sx:{bgcolor:"primary.main"},children:t.icon}),e.jsxs("div",{children:[e.jsx(c,{variant:"subtitle2",color:"textSecondary",children:t.label}),e.jsx(c,{variant:"h6",children:t.value})]})]})},o))}),e.jsx(x,{container:!0,spacing:2,sx:{mb:3},children:[{label:"TEAM NO",name:"teamNo",options:y.teams},{label:"STYLE",name:"style",options:y.styles},{label:"COLOR",name:"color",options:y.colors},{label:"SIZE",name:"size",options:y.sizes},{label:"CHECK POINT",name:"checkPoint",options:y.checkPoints}].map((t,o)=>e.jsx(x,{item:!0,xs:12,md:2.4,children:e.jsxs(p,{fullWidth:!0,children:[e.jsx(m,{children:t.label}),e.jsx(f,{name:t.name,value:u[t.name]||"",label:t.label,onChange:ce,IconComponent:we,sx:{borderRadius:"8px",marginBottom:4},disabled:n.submit||n.data||t.options.length===0,children:t.options.map((s,v)=>e.jsx(l,{value:s,children:s},v))})]})},o))}),n.data?e.jsx(i,{sx:{display:"flex",justifyContent:"center",my:4},children:e.jsx(P,{size:40})}):e.jsx(x,{container:!0,spacing:2,sx:{mb:3},children:[{title:"Success",value:h.successCount,gradient:"linear-gradient(to right, #00BA57, #006931)",icon:e.jsx(se,{sx:{fontSize:40,opacity:.8}}),onClick:null},{title:"Rework",value:h.reworkCount,gradient:"linear-gradient(to right, #FFD900, #DB5B00)",icon:e.jsx(ae,{sx:{fontSize:40,opacity:.8}}),onClick:()=>K("rework")},{title:"Defect",value:h.defectCount,gradient:"linear-gradient(to right, #EB0004, #960003)",icon:e.jsx(Re,{sx:{fontSize:40,opacity:.8}}),onClick:()=>K("defect")}].map((t,o)=>e.jsx(x,{item:!0,xs:12,md:4,children:e.jsxs(i,{sx:{p:3,borderRadius:"12px",background:t.gradient,color:"white",boxShadow:3,height:120,width:300,display:"flex",marginBottom:5,flexDirection:"column",justifyContent:"space-between",position:"relative",transition:"transform 0.3s","&:hover":{transform:"scale(1.02)",cursor:t.onClick?"pointer":"default"}},onClick:t.onClick||void 0,children:[e.jsx(c,{variant:"subtitle1",sx:{fontWeight:"bold"},children:t.title}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{sx:{position:"absolute",bottom:10,left:15},children:t.icon}),e.jsx(c,{variant:"h4",sx:{fontWeight:"bold",position:"absolute",bottom:10,right:15},children:t.value})]})]})},o))}),e.jsx(x,{container:!0,spacing:2,children:h.hourlyData.map((t,o)=>e.jsx(x,{item:!0,xs:12,sm:6,md:3,lg:1.5,children:e.jsxs(i,{sx:{p:2,textAlign:"center",borderRadius:"8px",boxShadow:3,bgcolor:"#78B3CE",transition:"transform 0.3s","&:hover":{transform:"translateY(-5px)"}},children:[e.jsxs(c,{variant:"subtitle2",color:"textSecondary",children:["HOUR: ",o+1]}),e.jsx(M,{sx:{my:1}}),e.jsx(c,{variant:"h5",children:t})]})},o))})]})}),e.jsx(ye,{}),e.jsxs(X,{open:Y.rework,onClose:()=>D("rework"),sx:{"& .MuiDialog-paper":{width:"400px",maxWidth:"none"}},children:[e.jsx(oe,{children:"Details for Rework"}),e.jsxs(ee,{children:[e.jsx(i,{sx:{textAlign:"center",my:2},children:e.jsx("img",{src:"/images/tshirt.png",alt:"Tshirt",style:{width:"100px",height:"100px"}})}),e.jsxs(p,{fullWidth:!0,sx:{my:2},children:[e.jsx(m,{children:"Part"}),e.jsx(f,{name:"part",value:r.part,label:"Part",onChange:b,disabled:n.defectReworkOptions,children:j.parts.map((t,o)=>e.jsx(l,{value:t,children:t},o))})]}),e.jsxs(p,{fullWidth:!0,sx:{my:2},children:[e.jsx(m,{children:"Location"}),e.jsx(f,{name:"location",value:r.location,label:"Location",onChange:b,disabled:n.defectReworkOptions,children:j.locations.map((t,o)=>e.jsx(l,{value:t,children:t},o))})]}),e.jsxs(p,{fullWidth:!0,sx:{my:2},children:[e.jsx(m,{children:"Defect Code"}),e.jsx(f,{name:"defectCode",value:r.defectCode,label:"Defect Code",onChange:b,disabled:n.defectReworkOptions,children:j.defectCodes.map((t,o)=>e.jsx(l,{value:t,children:t},o))})]})]}),e.jsxs(te,{children:[e.jsx(O,{onClick:()=>D("rework"),disabled:n.submit,children:"Cancel"}),e.jsx(O,{onClick:()=>Z("rework"),disabled:n.submit||!r.part||!r.location||!r.defectCode,variant:"contained",children:n.submit?e.jsx(P,{size:24}):"Submit"})]})]}),e.jsxs(X,{open:Y.defect,onClose:()=>D("defect"),sx:{"& .MuiDialog-paper":{width:"400px",maxWidth:"none"}},children:[e.jsx(oe,{children:"Details for Defect"}),e.jsxs(ee,{children:[e.jsx(i,{sx:{textAlign:"center",my:2},children:e.jsx("img",{src:"/images/tshirt.png",alt:"T-shirt",style:{width:"100px",height:"100px"}})}),e.jsxs(p,{fullWidth:!0,sx:{my:2},children:[e.jsx(m,{children:"Part"}),e.jsx(f,{name:"part",value:r.part,label:"Part",onChange:b,disabled:n.defectReworkOptions,children:j.parts.map((t,o)=>e.jsx(l,{value:t,children:t},o))})]}),e.jsxs(p,{fullWidth:!0,sx:{my:2},children:[e.jsx(m,{children:"Location"}),e.jsx(f,{name:"location",value:r.location,label:"Location",onChange:b,disabled:n.defectReworkOptions,children:j.locations.map((t,o)=>e.jsx(l,{value:t,children:t},o))})]}),e.jsxs(p,{fullWidth:!0,sx:{my:2},children:[e.jsx(m,{children:"Defect Code"}),e.jsx(f,{name:"defectCode",value:r.defectCode,label:"Defect Code",onChange:b,disabled:n.defectReworkOptions,children:j.defectCodes.map((t,o)=>e.jsx(l,{value:t,children:t},o))})]})]}),e.jsxs(te,{children:[e.jsx(O,{onClick:()=>D("defect"),disabled:n.submit,children:"Cancel"}),e.jsx(O,{onClick:()=>Z("defect"),disabled:n.submit||!r.part||!r.location||!r.defectCode,variant:"contained",children:n.submit?e.jsx(P,{size:24}):"Submit"})]})]}),e.jsx(ze,{open:k.open,autoHideDuration:6e3,onClose:()=>I({...k,open:!1}),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(Ie,{onClose:()=>I({...k,open:!1}),severity:k.severity,sx:{width:"100%"},children:k.message})})]})]})};export{Ze as default};
